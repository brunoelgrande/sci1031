<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.1 Leçon | SCI 1031 Visualisation et analyse de données spatiales sous R</title>
  <meta name="description" content="Ce cours est une introduction à la visualisation et l’analyse de données spatiales sous R. Il est offert à la TÉLUQ sous le sigle SCI 1031." />
  <meta name="generator" content="bookdown 0.27.3 and GitBook 2.6.7" />

  <meta property="og:title" content="6.1 Leçon | SCI 1031 Visualisation et analyse de données spatiales sous R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Ce cours est une introduction à la visualisation et l’analyse de données spatiales sous R. Il est offert à la TÉLUQ sous le sigle SCI 1031." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.1 Leçon | SCI 1031 Visualisation et analyse de données spatiales sous R" />
  
  <meta name="twitter:description" content="Ce cours est une introduction à la visualisation et l’analyse de données spatiales sous R. Il est offert à la TÉLUQ sous le sigle SCI 1031." />
  

<meta name="author" content="" />


<meta name="date" content="2022-07-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="carto.html"/>
<link rel="next" href="exercices.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<script src="libs/M_b4309f-1/data_stars_Me596c2.txt"></script>
<script src="libs/joda-0.0.1/joda.js"></script>
<script src="libs/joda-0.0.1/addImageQuery-bindings.js"></script>
<script src="libs/M_logique_numeric_0c629f-1/data_stars_M_logique_numeric2c03da.txt"></script>
<script src="libs/M_factor_5a4bc3-1/data_stars_M_factor986104.txt"></script>
<script src="libs/ICU_0d8c79-1/data_stars_ICUe2adb3.txt"></script>
<script src="libs/ICU_85173b-1/data_stars_ICUd123cb.txt"></script>
<script src="libs/T_sec_76a4ef-1/data_stars_T_secb2964d.txt"></script>
<script src="libs/T_fact4_moy_d2e80c-1/data_stars_T_fact4_moy16db50.txt"></script>
<script src="libs/T_fact4_max_fa8037-1/data_stars_T_fact4_max7d5f0e.txt"></script>
<script src="libs/T_fact8_moy_93a2eb-1/data_stars_T_fact8_moy2da3fc.txt"></script>
<script src="libs/T_fact8_max_6593a2-1/data_stars_T_fact8_maxf35e2c.txt"></script>
<script src="libs/SR_314dfa-1/data_stars_SR6fb0a4.txt"></script>
<script src="libs/SG_075489-1/data_stars_SGf492b1.txt"></script>
<script src="libs/SB_f1d2be-1/data_stars_SB7ab6ef.txt"></script>
<script src="libs/R2001f_ec042a-1/data_stars_R2001ff5ed82.txt"></script>
<script src="libs/R2001f_6f7c28-1/data_stars_R2001fde2416.txt"></script>
<script src="libs/R2016f_83c9d2-1/data_stars_R2016f318b76.txt"></script>
<script src="libs/dem_de41ab-1/data_stars_demba37d6.txt"></script>
<script src="libs/nouvelles_classes_dem_105bfe-1/data_stars_nouvelles_classes_dem4195dc.txt"></script>
<script src="libs/reclassify(dem, nouvelles_classes2)_f79acd-1/data_stars_reclassifydemnouvelles_classes216b540.txt"></script>
<script src="libs/dem_cr_320a84-1/data_stars_dem_cr891af2.txt"></script>
<script src="libs/dem_cr_p_5ea34d-1/data_stars_dem_cr_p21d937.txt"></script>
<script src="libs/dem_425b98-1/data_stars_dem71c95a.txt"></script>
<script src="libs/dem_ma_3294b5-1/data_stars_dem_maacfd42.txt"></script>
<script src="libs/dem_ma_inv_4eb2c6-1/data_stars_dem_ma_inv3ca6fd.txt"></script>
<script src="libs/dem_ma_1c754a-1/data_stars_dem_ma6412e3.txt"></script>
<script src="libs/dem_ma_inv_5810da-1/data_stars_dem_ma_invf9b4dc.txt"></script>
<script src="libs/dem_merge_e5f9a7-1/data_stars_dem_merge908316.txt"></script>
<script src="libs/dem_merge_ordre1_6fd524-1/data_stars_dem_merge_ordre1740de2.txt"></script>
<script src="libs/dem_merge_ordre2_847e36-1/data_stars_dem_merge_ordre278c619.txt"></script>
<script src="libs/dem_mosaic_min_f547be-1/data_stars_dem_mosaic_min867210.txt"></script>
<script src="libs/dem_mosaic_max_36e852-1/data_stars_dem_mosaic_max45872c.txt"></script>
<script src="libs/dem_mosaic_mean_6c3ba4-1/data_stars_dem_mosaic_mean731be8.txt"></script>
<script src="libs/dem_parcs_10b946-1/data_stars_dem_parcs75ea9c.txt"></script>
<script src="libs/dem_parcs_6d8ce7-1/data_stars_dem_parcs684729.txt"></script>
<script src="libs/dem_orford_7ab32c-1/data_stars_dem_orford4278b6.txt"></script>
<script src="libs/dem_orford_67cf1b-1/data_stars_dem_orforda43e7c.txt"></script>
<script src="libs/dem_orford_quantile_e4a3f6-1/data_stars_dem_orford_quantile0fb6d8.txt"></script>
<script src="libs/dem_orford_quantile_b87df6-1/data_stars_dem_orford_quantile597d20.txt"></script>
<script src="libs/dem_tampon_max_60b7c1-1/data_stars_dem_tampon_max3847dc.txt"></script>
<script src="libs/X1_9a57f3-1/data_stars_X1afecb5.txt"></script>
<script src="libs/X2_1b92e8-1/data_stars_X206e9b8.txt"></script>
<script src="libs/X3_56c17a-1/data_stars_X32b3f4e.txt"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/extra.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TELUQ -  SCI 1031.</a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="part"><span><b>I SCI 1031</b></span></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html"><i class="fa fa-check"></i>À propos du cours</a>
<ul>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#présentation"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#pourquoi-suivre-ce-cours"><i class="fa fa-check"></i>Pourquoi suivre ce cours ?</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#pourquoi-r"><i class="fa fa-check"></i>Pourquoi R ?</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#objectifs"><i class="fa fa-check"></i>Objectifs</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#contenu-sommaire"><i class="fa fa-check"></i>Contenu sommaire</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#fonctionnement-du-cours"><i class="fa fa-check"></i>Fonctionnement du cours</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#travaux-notés"><i class="fa fa-check"></i>Travaux notés</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#rétroaction"><i class="fa fa-check"></i>Rétroaction</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#route"><i class="fa fa-check"></i>Feuille de route</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#crédits"><i class="fa fa-check"></i>Crédits</a>
<ul>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#équipe"><i class="fa fa-check"></i>Équipe</a></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#reproduction-du-contenu"><i class="fa fa-check"></i>Reproduction du contenu</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="à-propos-du-cours.html"><a href="à-propos-du-cours.html#contact"><i class="fa fa-check"></i>Contact</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html"><i class="fa fa-check"></i>Ressources</a>
<ul>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#travaux-notés-1"><i class="fa fa-check"></i>Travaux notés</a></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#données"><i class="fa fa-check"></i>Données</a>
<ul>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#données-du-cours"><i class="fa fa-check"></i>Données du cours</a></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#autres-sources"><i class="fa fa-check"></i>Autres sources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#ressources-r"><i class="fa fa-check"></i>Ressources R</a>
<ul>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#documentation-générale-r"><i class="fa fa-check"></i>Documentation générale R</a></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#documentation-r-géospatial"><i class="fa fa-check"></i>Documentation R-géospatial</a></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#les-bibliothèques-r"><i class="fa fa-check"></i>Les bibliothèques R</a></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#res_RMarkdown"><i class="fa fa-check"></i>Documentation R-Markdown</a></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#les-couleurs-dans-r"><i class="fa fa-check"></i>Les couleurs dans R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ressources.html"><a href="ressources.html#références"><i class="fa fa-check"></i>Références</a></li>
</ul></li>
<li class="part"><span><b>II Apprentissage</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="lecon_intro.html"><a href="lecon_intro.html"><i class="fa fa-check"></i><b>1.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="lecon_intro.html"><a href="lecon_intro.html#hist"><i class="fa fa-check"></i><b>1.1.1</b> Les données spatiales d’hier à aujourd’hui</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#les-cartes-anciennes"><i class="fa fa-check"></i>Les cartes anciennes</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#la-géomatique"><i class="fa fa-check"></i>La géomatique</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#la-science-des-données"><i class="fa fa-check"></i>La science des données</a></li>
</ul></li>
<li class="chapter" data-level="1.1.2" data-path="lecon_intro.html"><a href="lecon_intro.html#outils"><i class="fa fa-check"></i><b>1.1.2</b> Les outils et logiciels de visualisation et d’analyse géo-spatiale</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#les-logiciels-commerciaux"><i class="fa fa-check"></i>Les logiciels commerciaux</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#les-logiciels-libres-daccès"><i class="fa fa-check"></i>Les logiciels libres d’accès</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#les-services-dinfonuagique"><i class="fa fa-check"></i>Les services d’infonuagique</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#les-langages-de-programmation-pour-lanalyse-géospatiale"><i class="fa fa-check"></i>Les langages de programmation pour l’analyse géospatiale</a></li>
</ul></li>
<li class="chapter" data-level="1.1.3" data-path="lecon_intro.html"><a href="lecon_intro.html#outil_R"><i class="fa fa-check"></i><b>1.1.3</b> Les bibliothèques géo-spatiales de R</a></li>
<li class="chapter" data-level="1.1.4" data-path="lecon_intro.html"><a href="lecon_intro.html#pensee_geo"><i class="fa fa-check"></i><b>1.1.4</b> La pensée géographique</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#échelle-spatiale"><i class="fa fa-check"></i>Échelle spatiale</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#échelle-cartographique"><i class="fa fa-check"></i>Échelle cartographique</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#distance"><i class="fa fa-check"></i>Distance</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#contiguïté"><i class="fa fa-check"></i>Contiguïté</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#interaction"><i class="fa fa-check"></i>Interaction</a></li>
<li class="chapter" data-level="" data-path="lecon_intro.html"><a href="lecon_intro.html#voisinage"><i class="fa fa-check"></i>Voisinage</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ex_intro.html"><a href="ex_intro.html"><i class="fa fa-check"></i><b>1.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="ex_intro.html"><a href="ex_intro.html#demarrage"><i class="fa fa-check"></i><b>1.2.1</b> Démarrage</a>
<ul>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#installer-r"><i class="fa fa-check"></i>Installer R</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#installer-rstudio"><i class="fa fa-check"></i>Installer RStudio</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#apprivoiser-rstudio"><i class="fa fa-check"></i>Apprivoiser RStudio</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#créer-un-fichier-r"><i class="fa fa-check"></i>Créer un fichier R</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#les-bibliothèques"><i class="fa fa-check"></i>Les bibliothèques</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#le-répertoire-de-travail"><i class="fa fa-check"></i>Le répertoire de travail</a></li>
</ul></li>
<li class="chapter" data-level="1.2.2" data-path="ex_intro.html"><a href="ex_intro.html#introR"><i class="fa fa-check"></i><b>1.2.2</b> Intro à R</a>
<ul>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#la-base"><i class="fa fa-check"></i>La base</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#les-objets"><i class="fa fa-check"></i>Les objets</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#les-catégories-de-données"><i class="fa fa-check"></i>Les catégories de données</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#les-structures-de-données"><i class="fa fa-check"></i>Les structures de données</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#importer-et-exporter-des-données"><i class="fa fa-check"></i>Importer et exporter des données</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#graphiques-de-base"><i class="fa fa-check"></i>Graphiques de base</a></li>
</ul></li>
<li class="chapter" data-level="1.2.3" data-path="ex_intro.html"><a href="ex_intro.html#exo1"><i class="fa fa-check"></i><b>1.2.3</b> À vous de jouer!</a>
<ul>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#question-1"><i class="fa fa-check"></i>Question 1</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#question-2"><i class="fa fa-check"></i>Question 2</a></li>
<li class="chapter" data-level="" data-path="ex_intro.html"><a href="ex_intro.html#question-3"><i class="fa fa-check"></i>Question 3</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="base.html"><a href="base.html"><i class="fa fa-check"></i><b>2</b> Modèles de données spatiales</a>
<ul>
<li class="chapter" data-level="2.1" data-path="leçon.html"><a href="leçon.html"><i class="fa fa-check"></i><b>2.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="leçon.html"><a href="leçon.html#les-données-vectorielles"><i class="fa fa-check"></i><b>2.1.1</b> Les données vectorielles</a></li>
<li class="chapter" data-level="2.1.2" data-path="leçon.html"><a href="leçon.html#les-données-matricielles"><i class="fa fa-check"></i><b>2.1.2</b> Les données matricielles</a></li>
<li class="chapter" data-level="2.1.3" data-path="leçon.html"><a href="leçon.html#structure-en-couches"><i class="fa fa-check"></i><b>2.1.3</b> Structure en couches</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ex_markdown1.html"><a href="ex_markdown1.html"><i class="fa fa-check"></i><b>2.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="ex_markdown1.html"><a href="ex_markdown1.html#introduction-à-r-markdown"><i class="fa fa-check"></i><b>2.2.1</b> Introduction à R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#bénéfices-de-r-markdown"><i class="fa fa-check"></i>Bénéfices de R Markdown</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#quest-ce-que-markdown"><i class="fa fa-check"></i>Qu’est-ce que Markdown?</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#quest-ce-que-pandoc"><i class="fa fa-check"></i>Qu’est-ce que Pandoc?</a></li>
</ul></li>
<li class="chapter" data-level="2.2.2" data-path="ex_markdown1.html"><a href="ex_markdown1.html#utiliser-un-fichier-rmarkdown"><i class="fa fa-check"></i><b>2.2.2</b> Utiliser un fichier RMarkdown</a>
<ul>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#organisation-générale"><i class="fa fa-check"></i>Organisation générale</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#installer-r-markdown"><i class="fa fa-check"></i>Installer R Markdown</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#createmarkdownfile"><i class="fa fa-check"></i>Créer un fichier R Markdown</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#spécifier-les-options-yaml"><i class="fa fa-check"></i>Spécifier les options YAML</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#éditer-le-contenu-du-fichier-r-markdown"><i class="fa fa-check"></i>Éditer le contenu du fichier R Markdown</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#obtenir-le-document-final"><i class="fa fa-check"></i>Obtenir le document final</a></li>
</ul></li>
<li class="chapter" data-level="2.2.3" data-path="ex_markdown1.html"><a href="ex_markdown1.html#exo2"><i class="fa fa-check"></i><b>2.2.3</b> À vous de jouer !</a>
<ul>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#question-1-1"><i class="fa fa-check"></i>Question 1</a></li>
<li class="chapter" data-level="" data-path="ex_markdown1.html"><a href="ex_markdown1.html#question-2-1"><i class="fa fa-check"></i>Question 2</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="SRC.html"><a href="SRC.html"><i class="fa fa-check"></i><b>3</b> Systèmes de coordonnées de référence</a>
<ul>
<li class="chapter" data-level="3.1" data-path="leçon-1.html"><a href="leçon-1.html"><i class="fa fa-check"></i><b>3.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="leçon-1.html"><a href="leçon-1.html#les-systèmes-géodésiques"><i class="fa fa-check"></i><b>3.1.1</b> Les systèmes géodésiques</a></li>
<li class="chapter" data-level="3.1.2" data-path="leçon-1.html"><a href="leçon-1.html#les-systèmes-de-coordonnées"><i class="fa fa-check"></i><b>3.1.2</b> Les systèmes de coordonnées</a></li>
<li class="chapter" data-level="3.1.3" data-path="leçon-1.html"><a href="leçon-1.html#les-projections"><i class="fa fa-check"></i><b>3.1.3</b> Les projections</a></li>
<li class="chapter" data-level="3.1.4" data-path="leçon-1.html"><a href="leçon-1.html#projections-couramment-utilisées"><i class="fa fa-check"></i><b>3.1.4</b> Projections couramment utilisées</a></li>
<li class="chapter" data-level="3.1.5" data-path="leçon-1.html"><a href="leçon-1.html#représentation-dun-scr"><i class="fa fa-check"></i><b>3.1.5</b> Représentation d’un SCR</a>
<ul>
<li class="chapter" data-level="" data-path="leçon-1.html"><a href="leçon-1.html#le-well-known-text"><i class="fa fa-check"></i>Le Well-known text</a></li>
<li class="chapter" data-level="" data-path="leçon-1.html"><a href="leçon-1.html#la-syntaxe-proj4"><i class="fa fa-check"></i>La syntaxe PROJ4</a></li>
<li class="chapter" data-level="" data-path="leçon-1.html"><a href="leçon-1.html#code_epsg"><i class="fa fa-check"></i>Les codes EPSG</a></li>
</ul></li>
<li class="chapter" data-level="3.1.6" data-path="leçon-1.html"><a href="leçon-1.html#résumé"><i class="fa fa-check"></i><b>3.1.6</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ex_markdown2.html"><a href="ex_markdown2.html"><i class="fa fa-check"></i><b>3.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ex_markdown2.html"><a href="ex_markdown2.html#pandocmarkdown"><i class="fa fa-check"></i><b>3.2.1</b> Le variante Pandoc de Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#informations-de-départ"><i class="fa fa-check"></i>Informations de départ</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#décoration-du-texte"><i class="fa fa-check"></i>Décoration du texte</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-titres"><i class="fa fa-check"></i>Les titres</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-listes-1"><i class="fa fa-check"></i>Les listes</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#blocs-de-citation"><i class="fa fa-check"></i>Blocs de citation</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-symboles-matématiques"><i class="fa fa-check"></i>Les symboles matématiques</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#exo3_images"><i class="fa fa-check"></i>Les images</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-tableaux"><i class="fa fa-check"></i>Les tableaux</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-références"><i class="fa fa-check"></i>Les références</a></li>
</ul></li>
<li class="chapter" data-level="3.2.2" data-path="ex_markdown2.html"><a href="ex_markdown2.html#blocsR"><i class="fa fa-check"></i><b>3.2.2</b> Intégration de R dans le document</a>
<ul>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-commentaires-1"><i class="fa fa-check"></i>Les commentaires</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#affichage-du-code-source"><i class="fa fa-check"></i>Affichage du code source</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#affichage-des-sorties"><i class="fa fa-check"></i>Affichage des sorties</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#mode-dévaluation-du-code"><i class="fa fa-check"></i>Mode d’évaluation du code</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-tableaux-1"><i class="fa fa-check"></i>Les tableaux</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-figures"><i class="fa fa-check"></i>Les figures</a></li>
<li class="chapter" data-level="" data-path="ex_markdown2.html"><a href="ex_markdown2.html#les-graphiques-non-générés-par-r"><i class="fa fa-check"></i>Les graphiques non-générés par R</a></li>
</ul></li>
<li class="chapter" data-level="3.2.3" data-path="ex_markdown2.html"><a href="ex_markdown2.html#exo3"><i class="fa fa-check"></i><b>3.2.3</b> À vous de jouer !</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vec.html"><a href="vec.html"><i class="fa fa-check"></i><b>4</b> Données vectorielles</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lecon_vec.html"><a href="lecon_vec.html"><i class="fa fa-check"></i><b>4.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="lecon_vec.html"><a href="lecon_vec.html#data_mod4"><i class="fa fa-check"></i><b>4.1.1</b> Télécharger les données</a></li>
<li class="chapter" data-level="4.1.2" data-path="lecon_vec.html"><a href="lecon_vec.html#create_vec"><i class="fa fa-check"></i><b>4.1.2</b> Créer des données vectorielles</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#créer-des-géométries-simples"><i class="fa fa-check"></i>Créer des géométries simples</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#attribuer-un-scr"><i class="fa fa-check"></i>Attribuer un SCR</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#définir-des-attributs"><i class="fa fa-check"></i>Définir des attributs</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#fct_st_as_sf"><i class="fa fa-check"></i>La fonction <code>st_as_sf()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.1.3" data-path="lecon_vec.html"><a href="lecon_vec.html#read_vec"><i class="fa fa-check"></i><b>4.1.3</b> Lire un shapefile et interpréter sa géométrie</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#lire-shp"><i class="fa fa-check"></i>Lire les données</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#explorer-les-métadonnées-dun-shapefile"><i class="fa fa-check"></i>Explorer les métadonnées d’un shapefile</a></li>
</ul></li>
<li class="chapter" data-level="4.1.4" data-path="lecon_vec.html"><a href="lecon_vec.html#visualisation-de-shapefiles-sous-r"><i class="fa fa-check"></i><b>4.1.4</b> Visualisation de shapefiles sous R</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#visualisation-avec-la-librairie-mapview"><i class="fa fa-check"></i>Visualisation avec la librairie Mapview</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#visualiser-des-données-vectorielles-par-attribut"><i class="fa fa-check"></i>Visualiser des données vectorielles par attribut</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#visualiser-plusieurs-shapefiles"><i class="fa fa-check"></i>Visualiser plusieurs shapefiles</a></li>
</ul></li>
<li class="chapter" data-level="4.1.5" data-path="lecon_vec.html"><a href="lecon_vec.html#reprojection-de-données-vectorielles-sous-r"><i class="fa fa-check"></i><b>4.1.5</b> Reprojection de données vectorielles sous R</a></li>
<li class="chapter" data-level="4.1.6" data-path="lecon_vec.html"><a href="lecon_vec.html#gdt"><i class="fa fa-check"></i><b>4.1.6</b> Lire une géodatabase et explorer ses couches</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#lire-les-données"><i class="fa fa-check"></i>Lire les données</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#explorer-les-attributs-dune-couche"><i class="fa fa-check"></i>Explorer les attributs d’une couche</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#sélection-dun-sous-ensemble-de-données"><i class="fa fa-check"></i>Sélection d’un sous-ensemble de données</a></li>
<li class="chapter" data-level="" data-path="lecon_vec.html"><a href="lecon_vec.html#visualisation-de-plusieurs-couches-dune-géodatabse"><i class="fa fa-check"></i>Visualisation de plusieurs couches d’une géodatabse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ex_vec.html"><a href="ex_vec.html"><i class="fa fa-check"></i><b>4.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="" data-path="ex_vec.html"><a href="ex_vec.html#question-1-2"><i class="fa fa-check"></i>Question 1</a></li>
<li class="chapter" data-level="" data-path="ex_vec.html"><a href="ex_vec.html#question-2-2"><i class="fa fa-check"></i>Question 2</a></li>
<li class="chapter" data-level="" data-path="ex_vec.html"><a href="ex_vec.html#question-3-1"><i class="fa fa-check"></i>Question 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mat.html"><a href="mat.html"><i class="fa fa-check"></i><b>5</b> Données matricielles</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lecon_mat.html"><a href="lecon_mat.html"><i class="fa fa-check"></i><b>5.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="lecon_mat.html"><a href="lecon_mat.html#data_mod5"><i class="fa fa-check"></i><b>5.1.1</b> Télécharger les données</a></li>
<li class="chapter" data-level="5.1.2" data-path="lecon_mat.html"><a href="lecon_mat.html#create_mat"><i class="fa fa-check"></i><b>5.1.2</b> Créer des données matricielles</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#créer-un-raster-simple-et-le-visualiser"><i class="fa fa-check"></i>Créer un raster simple et le visualiser</a></li>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#raster-de-différents-types-de-données"><i class="fa fa-check"></i>Raster de différents types de données</a></li>
</ul></li>
<li class="chapter" data-level="5.1.3" data-path="lecon_mat.html"><a href="lecon_mat.html#comprendre-la-structure-dun-raster"><i class="fa fa-check"></i><b>5.1.3</b> Comprendre la structure d’un raster</a></li>
<li class="chapter" data-level="5.1.4" data-path="lecon_mat.html"><a href="lecon_mat.html#statistiques-de-base-sur-un-raster"><i class="fa fa-check"></i><b>5.1.4</b> Statistiques de base sur un raster</a></li>
<li class="chapter" data-level="5.1.5" data-path="lecon_mat.html"><a href="lecon_mat.html#read_mat"><i class="fa fa-check"></i><b>5.1.5</b> Lire un raster et explorer son contenu</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#lire-les-données-1"><i class="fa fa-check"></i>Lire les données</a></li>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#explorer-les-statistiques-de-base"><i class="fa fa-check"></i>Explorer les statistiques de base</a></li>
</ul></li>
<li class="chapter" data-level="5.1.6" data-path="lecon_mat.html"><a href="lecon_mat.html#visualiser-les-données-matricielles-avec-mapview"><i class="fa fa-check"></i><b>5.1.6</b> Visualiser les données matricielles avec mapview()</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#visualiser-une-section-dun-raster"><i class="fa fa-check"></i>Visualiser une section d’un raster</a></li>
</ul></li>
<li class="chapter" data-level="5.1.7" data-path="lecon_mat.html"><a href="lecon_mat.html#changer-la-résolution-dun-raster"><i class="fa fa-check"></i><b>5.1.7</b> Changer la résolution d’un raster</a></li>
<li class="chapter" data-level="5.1.8" data-path="lecon_mat.html"><a href="lecon_mat.html#changer-la-projection-dun-raster"><i class="fa fa-check"></i><b>5.1.8</b> Changer la projection d’un <em>raster</em></a></li>
<li class="chapter" data-level="5.1.9" data-path="lecon_mat.html"><a href="lecon_mat.html#sauvegarder-un-raster"><i class="fa fa-check"></i><b>5.1.9</b> Sauvegarder un raster</a></li>
<li class="chapter" data-level="5.1.10" data-path="lecon_mat.html"><a href="lecon_mat.html#read_mult"><i class="fa fa-check"></i><b>5.1.10</b> Lire et visualiser des données matricielles multi-bande</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#lire-des-données-multi-bande"><i class="fa fa-check"></i>Lire des données multi-bande</a></li>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#rasterbrick-et-rasterstack"><i class="fa fa-check"></i>RasterBrick et RasterStack</a></li>
<li class="chapter" data-level="" data-path="lecon_mat.html"><a href="lecon_mat.html#visualiser-un-raster-multi-bande"><i class="fa fa-check"></i>Visualiser un raster multi-bande</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="ex_mat.html"><a href="ex_mat.html"><i class="fa fa-check"></i><b>5.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="" data-path="ex_mat.html"><a href="ex_mat.html#question-1-3"><i class="fa fa-check"></i>Question 1</a></li>
<li class="chapter" data-level="" data-path="ex_mat.html"><a href="ex_mat.html#question-2-3"><i class="fa fa-check"></i>Question 2</a></li>
<li class="chapter" data-level="" data-path="ex_mat.html"><a href="ex_mat.html#question-3-2"><i class="fa fa-check"></i>Question 3</a></li>
<li class="chapter" data-level="" data-path="ex_mat.html"><a href="ex_mat.html#question-4"><i class="fa fa-check"></i>Question 4</a></li>
<li class="chapter" data-level="" data-path="ex_mat.html"><a href="ex_mat.html#question-5"><i class="fa fa-check"></i>Question 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="carto.html"><a href="carto.html"><i class="fa fa-check"></i><b>6</b> Cartographie</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lecon_carto.html"><a href="lecon_carto.html"><i class="fa fa-check"></i><b>6.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="lecon_carto.html"><a href="lecon_carto.html#data_mod6"><i class="fa fa-check"></i><b>6.1.1</b> Télécharger les données</a></li>
<li class="chapter" data-level="6.1.2" data-path="lecon_carto.html"><a href="lecon_carto.html#principes-de-base-en-cartographie"><i class="fa fa-check"></i><b>6.1.2</b> Principes de base en cartographie</a></li>
<li class="chapter" data-level="6.1.3" data-path="lecon_carto.html"><a href="lecon_carto.html#basetmap"><i class="fa fa-check"></i><b>6.1.3</b> Cartes statiques avec tmap</a></li>
<li class="chapter" data-level="6.1.4" data-path="lecon_carto.html"><a href="lecon_carto.html#les-polygones"><i class="fa fa-check"></i><b>6.1.4</b> Les polygones</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#intérieur-des-polygones"><i class="fa fa-check"></i>Intérieur des polygones</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#objet-tmap"><i class="fa fa-check"></i>Objet tmap</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#frontières-des-polygones"><i class="fa fa-check"></i>Frontières des polygones</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#attributs-des-polygones"><i class="fa fa-check"></i>Attributs des polygones</a></li>
</ul></li>
<li class="chapter" data-level="6.1.5" data-path="lecon_carto.html"><a href="lecon_carto.html#spécificités-cartographiques"><i class="fa fa-check"></i><b>6.1.5</b> Spécificités cartographiques</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#barre-déchelle-et-rose-des-vents"><i class="fa fa-check"></i>Barre d’échelle et rose des vents</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#grille-et-graticules"><i class="fa fa-check"></i>Grille et graticules</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#attribuer-les-crédits-ou-la-source-des-données"><i class="fa fa-check"></i>Attribuer les crédits ou la source des données</a></li>
</ul></li>
<li class="chapter" data-level="6.1.6" data-path="lecon_carto.html"><a href="lecon_carto.html#mise-en-page"><i class="fa fa-check"></i><b>6.1.6</b> Mise en page</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#titre-cadre-et-couleur-du-fond"><i class="fa fa-check"></i>Titre, cadre et couleur du fond</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#légende"><i class="fa fa-check"></i>Légende</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#ajustement-des-couleurs"><i class="fa fa-check"></i>Ajustement des couleurs</a></li>
<li class="chapter" data-level="" data-path="lecon_carto.html"><a href="lecon_carto.html#styles-prédéfinis"><i class="fa fa-check"></i>Styles prédéfinis</a></li>
</ul></li>
<li class="chapter" data-level="6.1.7" data-path="lecon_carto.html"><a href="lecon_carto.html#écriture-sur-une-carte"><i class="fa fa-check"></i><b>6.1.7</b> Écriture sur une carte</a></li>
<li class="chapter" data-level="6.1.8" data-path="lecon_carto.html"><a href="lecon_carto.html#les-lignes"><i class="fa fa-check"></i><b>6.1.8</b> Les lignes</a></li>
<li class="chapter" data-level="6.1.9" data-path="lecon_carto.html"><a href="lecon_carto.html#les-points"><i class="fa fa-check"></i><b>6.1.9</b> Les points</a></li>
<li class="chapter" data-level="6.1.10" data-path="lecon_carto.html"><a href="lecon_carto.html#données-matricielles"><i class="fa fa-check"></i><b>6.1.10</b> Données matricielles</a></li>
<li class="chapter" data-level="6.1.11" data-path="lecon_carto.html"><a href="lecon_carto.html#carte-avec-symboles-proportionnels"><i class="fa fa-check"></i><b>6.1.11</b> Carte avec symboles proportionnels</a></li>
<li class="chapter" data-level="6.1.12" data-path="lecon_carto.html"><a href="lecon_carto.html#cartes-choroplèthes"><i class="fa fa-check"></i><b>6.1.12</b> Cartes Choroplèthes</a></li>
<li class="chapter" data-level="6.1.13" data-path="lecon_carto.html"><a href="lecon_carto.html#cartes-à-panneaux-multiples"><i class="fa fa-check"></i><b>6.1.13</b> Cartes à panneaux multiples</a></li>
<li class="chapter" data-level="6.1.14" data-path="lecon_carto.html"><a href="lecon_carto.html#cartes-avec-encadré"><i class="fa fa-check"></i><b>6.1.14</b> Cartes avec encadré</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="exercices.html"><a href="exercices.html"><i class="fa fa-check"></i><b>6.2</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="manip_vec.html"><a href="manip_vec.html"><i class="fa fa-check"></i><b>7</b> Manipulation de données vectorielles</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html"><i class="fa fa-check"></i><b>7.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html#data_mod7"><i class="fa fa-check"></i><b>7.1.1</b> Télécharger les données</a></li>
<li class="chapter" data-level="7.1.2" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html#opérations-de-base"><i class="fa fa-check"></i><b>7.1.2</b> Opérations de base</a>
<ul>
<li class="chapter" data-level="7.1.2.1" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html#importer-et-visualiser-les-données"><i class="fa fa-check"></i><b>7.1.2.1</b> Importer et visualiser les données</a></li>
<li class="chapter" data-level="7.1.2.2" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html#opérations-sur-les-attributs-des-données-vectorielles"><i class="fa fa-check"></i><b>7.1.2.2</b> Opérations sur les attributs des données vectorielles</a></li>
<li class="chapter" data-level="7.1.2.3" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html#opérations-spatiales-sur-les-données-vectorielles"><i class="fa fa-check"></i><b>7.1.2.3</b> Opérations spatiales sur les données vectorielles</a></li>
</ul></li>
<li class="chapter" data-level="7.1.3" data-path="lecon_manip_vec.html"><a href="lecon_manip_vec.html#prob_mod7"><i class="fa fa-check"></i><b>7.1.3</b> Problématique à résoudre</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="ex_map_vec.html"><a href="ex_map_vec.html"><i class="fa fa-check"></i><b>7.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="" data-path="ex_map_vec.html"><a href="ex_map_vec.html#question-1-4"><i class="fa fa-check"></i>Question 1</a></li>
<li class="chapter" data-level="" data-path="ex_map_vec.html"><a href="ex_map_vec.html#question-2-4"><i class="fa fa-check"></i>Question 2</a></li>
<li class="chapter" data-level="" data-path="ex_map_vec.html"><a href="ex_map_vec.html#question-3-3"><i class="fa fa-check"></i>Question 3</a></li>
<li class="chapter" data-level="" data-path="ex_map_vec.html"><a href="ex_map_vec.html#question-4-1"><i class="fa fa-check"></i>Question 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="manip_mat.html"><a href="manip_mat.html"><i class="fa fa-check"></i><b>8</b> Manipulation de données matricielles</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html"><i class="fa fa-check"></i><b>8.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#data_mod8"><i class="fa fa-check"></i><b>8.1.1</b> Télécharger les données</a></li>
<li class="chapter" data-level="8.1.2" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#opération-de-bases"><i class="fa fa-check"></i><b>8.1.2</b> Opération de bases</a>
<ul>
<li class="chapter" data-level="8.1.2.1" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#importer-et-visualiser-les-données-1"><i class="fa fa-check"></i><b>8.1.2.1</b> Importer et visualiser les données</a></li>
<li class="chapter" data-level="8.1.2.2" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#filtrer-les-cellules-dun-raster"><i class="fa fa-check"></i><b>8.1.2.2</b> Filtrer les cellules d’un <em>raster</em></a></li>
<li class="chapter" data-level="8.1.2.3" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#combiner-des-rasters"><i class="fa fa-check"></i><b>8.1.2.3</b> Combiner des <em>rasters</em></a></li>
</ul></li>
<li class="chapter" data-level="8.1.3" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#prob_mod8"><i class="fa fa-check"></i><b>8.1.3</b> Problématique à résoudre</a>
<ul>
<li class="chapter" data-level="" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#résolution-de-la-question-1"><i class="fa fa-check"></i>Résolution de la question 1</a></li>
<li class="chapter" data-level="" data-path="lecon_mat_mani.html"><a href="lecon_mat_mani.html#résolution-de-la-question-2"><i class="fa fa-check"></i>Résolution de la question 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ex_mat_manip.html"><a href="ex_mat_manip.html"><i class="fa fa-check"></i><b>8.2</b> Exercices</a>
<ul>
<li class="chapter" data-level="" data-path="ex_mat_manip.html"><a href="ex_mat_manip.html#question-1-5"><i class="fa fa-check"></i>Question 1</a></li>
<li class="chapter" data-level="" data-path="ex_mat_manip.html"><a href="ex_mat_manip.html#question-2-5"><i class="fa fa-check"></i>Question 2</a></li>
<li class="chapter" data-level="" data-path="ex_mat_manip.html"><a href="ex_mat_manip.html#question-3-4"><i class="fa fa-check"></i>Question 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="spatiotemp.html"><a href="spatiotemp.html"><i class="fa fa-check"></i><b>9</b> Données spatiotemporelles</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html"><i class="fa fa-check"></i><b>9.1</b> Leçon</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#data_mod9"><i class="fa fa-check"></i><b>9.1.1</b> Télécharger les données</a></li>
<li class="chapter" data-level="9.1.2" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#données-spatiotemporelles-vectorielles"><i class="fa fa-check"></i><b>9.1.2</b> Données spatiotemporelles vectorielles</a>
<ul>
<li class="chapter" data-level="9.1.2.1" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#importer-les-données-1"><i class="fa fa-check"></i><b>9.1.2.1</b> Importer les données</a></li>
<li class="chapter" data-level="9.1.2.2" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#vitesse-moyenne-des-trajets"><i class="fa fa-check"></i><b>9.1.2.2</b> Vitesse moyenne des trajets</a></li>
<li class="chapter" data-level="9.1.2.3" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#période-de-lannée-préférée"><i class="fa fa-check"></i><b>9.1.2.3</b> Période de l’année préférée</a></li>
<li class="chapter" data-level="9.1.2.4" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#animation-du-trajet-le-plus-long"><i class="fa fa-check"></i><b>9.1.2.4</b> Animation du trajet le plus long</a></li>
</ul></li>
<li class="chapter" data-level="9.1.3" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#données-spatiotemporelles-matricielles"><i class="fa fa-check"></i><b>9.1.3</b> Données spatiotemporelles matricielles</a>
<ul>
<li class="chapter" data-level="9.1.3.1" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#importer-les-données-2"><i class="fa fa-check"></i><b>9.1.3.1</b> Importer les données</a></li>
<li class="chapter" data-level="9.1.3.2" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#les-objets-rasterstack"><i class="fa fa-check"></i><b>9.1.3.2</b> Les objets rasterStack</a></li>
<li class="chapter" data-level="9.1.3.3" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#mois-de-plus-faible-pluviométrie"><i class="fa fa-check"></i><b>9.1.3.3</b> Mois de plus faible pluviométrie</a></li>
<li class="chapter" data-level="9.1.3.4" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#points-les-plus-chauds"><i class="fa fa-check"></i><b>9.1.3.4</b> Points les plus chauds</a></li>
<li class="chapter" data-level="9.1.3.5" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#profils-de-temperatures-et-de-precipitations"><i class="fa fa-check"></i><b>9.1.3.5</b> Profils de temperatures et de precipitations</a></li>
<li class="chapter" data-level="9.1.3.6" data-path="lecon_spatiotemp.html"><a href="lecon_spatiotemp.html#animations"><i class="fa fa-check"></i><b>9.1.3.6</b> Animations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ex_spatiotemp.html"><a href="ex_spatiotemp.html"><i class="fa fa-check"></i><b>9.2</b> Exercice</a>
<ul>
<li class="chapter" data-level="" data-path="ex_spatiotemp.html"><a href="ex_spatiotemp.html#question-1-6"><i class="fa fa-check"></i>Question 1</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SCI 1031 Visualisation et analyse de données spatiales sous R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lecon_carto" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Leçon<a href="lecon_carto.html#lecon_carto" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="data_mod6" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Télécharger les données<a href="lecon_carto.html#data_mod6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="les-données-4" class="section level6 unnumbered hasAnchor boite ico donnees gauche">
<h6>Les données<a href="lecon_carto.html#les-données-4" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p><br></p>
</div>
<p>Importez l’<a href="https://github.com/sci1031/data/raw/main/Module6_donnees.zip">ensemble des données</a> utilisées dans ce module.
Sauvegardez le dossier compressé (<code>Module6_donnees.zip</code>) dans votre répertoire de travail pour ce module, et dézippez-le.
Ce dossier comprend lui-même cinq sous-dossiers que vous devez également dézipper:</p>
<ul>
<li><code>COVID</code></li>
<li><code>Elevation</code></li>
<li><code>Population</code></li>
<li><code>Routes</code></li>
<li><code>Villes</code></li>
</ul>
<p><br></p>
<p>Nous utiliserons ces données à partir de la section <a href="lecon_carto.html#basetmap">6.1.3</a>. Commençons d’abord par une introduction sur les principes de bases de la cartographie.</p>
</div>
<div id="principes-de-base-en-cartographie" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Principes de base en cartographie<a href="lecon_carto.html#principes-de-base-en-cartographie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="basetmap" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Cartes statiques avec tmap<a href="lecon_carto.html#basetmap" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Il existe plusieurs bibliothèques R permettant de visualiser des données spatiales. La bibliothèque <code>mapview</code>, que nous avons déjà utilisée, en est un exemple. La bibliothèque <code>ggplot2</code>, que vous connaissez peut-être, permet de créer des cartes qui peuvent être peaufinées par l’utilisation de fonctions des bibliothèques <code>sf</code> et <code>ggspatial</code><a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a>. Dans le cadre de ce cours, nous nous concentrerons sur la bibliothèque <code>tmap</code> et l’apprentissage de ses fonctions principales.</p>
<p>Nous avons choisi <code>tmap</code> parce que cette bibliothèque est relativement simple à utiliser et que ses fonctions sont intuitives. Le fonctionnement de <code>tmap</code> est très similaire à celui de la bibliothèque <code>ggplot2</code> qui est fort populaire pour la visualisation de données de toutes sortes. Si vous connaissez déjà <code>ggplot2</code>, alors l’apprentissage de <code>tmap</code> vous sera familié. Si vous ne connaissez pas <code>ggplot2</code>, vous pourriez être amenés à l’utiliser dans le futur, et dans ce cas votre connaissance de <code>tmap</code> vous sera utile.</p>
<p>De façon générale, nous utilisons <code>tmap</code> pour cartographier des données spatiales de la façon suivante:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="lecon_carto.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(DonneesSpatiales) <span class="sc">+</span> <span class="fu">tm_fonction1</span>() <span class="sc">+</span> <span class="fu">tm_fonction2</span>() <span class="sc">+</span> ...</span></code></pre></div>
<p><br></p>
<p>La fonction <code>tm_shape()</code> est suivi d’une ou de plusieurs fonctions qui précisent les objets ou les attributs des données à cartographier ainsi que les éléments cartographiques à ajouter et la mise en page souhaitée.</p>
<p>Télécharger la bibliothèque <code>tmap</code>:</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="lecon_carto.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tmap&quot;</span>)</span></code></pre></div>
<p>Chargez <code>tmap</code> dans votre session de travail R ainsi que les bibliothèques <code>sf</code> et <code>raster</code> dont nous aurons besoin pour lire et manipuler les données vectorielles et matricielles respectivement:</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="lecon_carto.html#cb630-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb630-2"><a href="lecon_carto.html#cb630-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb630-3"><a href="lecon_carto.html#cb630-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span></code></pre></div>
</div>
<div id="les-polygones" class="section level3 hasAnchor" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> Les polygones<a href="lecon_carto.html#les-polygones" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="données-sur-les-régions-administratives-du-québec" class="section level5 unnumbered hasAnchor">
<h5>Données sur les régions administratives du Québec<a href="lecon_carto.html#données-sur-les-régions-administratives-du-québec" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Pour débuter notre exploration des fonctions de cartographie offertes avec <code>tmap</code> nous utiliserons les données vectorielles sur les limites des régions administratives du Québec ainsi que la taille de leur population. La taille des populations des régions administratives provient de la Banque de données des statistiques officielles sur le Québec (<a href="https://bdso.gouv.qc.ca/" class="uri">https://bdso.gouv.qc.ca/</a>), et les limites géographiques des régions proviennent du site Données Québec (<a href="https://www.donneesquebec.ca/recherche/dataset/decoupages-administratifs" class="uri">https://www.donneesquebec.ca/recherche/dataset/decoupages-administratifs</a>).</p>
<p>Utiliser la fonction <code>st_read()</code> de la bibliothèque <code>sf</code> pour lire le <em>shapefile</em> <code>QC_RegAdm_Pop.shp</code> contenu dans le dossier <code>Population</code>:</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="lecon_carto.html#cb631-1" aria-hidden="true" tabindex="-1"></a>Q <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;Module6/Module6_donnees/Population/QC_RegAdm_Pop.shp&quot;</span>)</span></code></pre></div>
<pre class="codeout"><code>Reading layer `QC_RegAdm_Pop&#39; from data source 
  `E:\ELF\Dropbox\Teluq\Enseignement\Cours\SCI1031\Developpement\Structure_test\sci1031\Module6\Module6_donnees\Population\QC_RegAdm_Pop.shp&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 17 features and 8 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -830300 ymin: 118000 xmax: 783300 ymax: 2091000
Projected CRS: NAD83 / Quebec Lambert</code></pre>
<p><br></p>
<p>Observer la structure et les attributs du <em>shapefile</em> <code>Q</code>. Celui-ci contient 17 multipolygones, un pour chacune des régions administratives du territoire québécois. De plus, <code>Q</code> contient 8 attributs:</p>
<ul>
<li><code>NUM_REG</code>: le numéro associé à la région administrative,</li>
<li><code>NOM_REG</code>: le nom de la région administrative,</li>
<li><code>AREA_REG</code>: la superficie de la région,</li>
<li><code>Pop_tot</code>: la population totale en 2019 dans la région,</li>
<li><code>Pop_0_14</code>: la population agée de 0 à 14 ans,</li>
<li><code>Pop_15_24</code>: la population agée de 15 à 24 ans,</li>
<li><code>Pop_25_64</code>: la population agée de 25 à 64 ans,</li>
<li><code>Pop_65_</code>: la population agée de 65 ans et plus.</li>
</ul>
</div>
<div id="intérieur-des-polygones" class="section level4 unnumbered hasAnchor">
<h4>Intérieur des polygones<a href="lecon_carto.html#intérieur-des-polygones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fct_tmfill" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_fill<a href="lecon_carto.html#fct_tmfill" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Créons tout d’abord une carte simple du <em>shapefile</em> Q que nous venons de charger. La fonction <code>tm_fill()</code> permet de remplir de façon homogène l’intérieur des limites d’un polygone. Elle s’applique donc aux données vectorielles de type polygone, et on l’ajoute à la donction <code>tm_shape()</code>.</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="lecon_carto.html#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q)<span class="sc">+</span> </span>
<span id="cb633-2"><a href="lecon_carto.html#cb633-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>()</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-199-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
</div>
<div id="objet-tmap" class="section level4 unnumbered hasAnchor">
<h4>Objet tmap<a href="lecon_carto.html#objet-tmap" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>La bibliothèque <code>tmap</code> comprend sa propre classe d’objets:</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="lecon_carto.html#cb634-1" aria-hidden="true" tabindex="-1"></a>map_Q <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q)<span class="sc">+</span> </span>
<span id="cb634-2"><a href="lecon_carto.html#cb634-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">tm_fill</span>()</span>
<span id="cb634-3"><a href="lecon_carto.html#cb634-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb634-4"><a href="lecon_carto.html#cb634-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(map_Q)</span></code></pre></div>
<pre class="codeout"><code>[1] &quot;tmap&quot;</code></pre>
<p><br>
En créant un objet <code>tmap</code>, la carte est seulement affichée lorsqu’on appelle l’objet.
La création d’objet <code>tmap</code> est utile car, comme nous le verrons, elle permet de constituer une carte de base à laquelle nous pouvons ajouter des éléments cartographiques.</p>
</div>
<div id="frontières-des-polygones" class="section level4 unnumbered hasAnchor">
<h4>Frontières des polygones<a href="lecon_carto.html#frontières-des-polygones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fonction-tm_borders" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_borders()<a href="lecon_carto.html#fonction-tm_borders" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_borders()</code> permet d’illustrer les frontières des polygones:</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="lecon_carto.html#cb636-1" aria-hidden="true" tabindex="-1"></a><span class="co"># frontiere des regions admin</span></span>
<span id="cb636-2"><a href="lecon_carto.html#cb636-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span></span>
<span id="cb636-3"><a href="lecon_carto.html#cb636-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>()</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-201-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>La fonction <code>tm_borders()</code> peut s’utiliser conjointement avec la fonction <code>tm_fill()</code>:</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="lecon_carto.html#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quebec + frontiere</span></span>
<span id="cb637-2"><a href="lecon_carto.html#cb637-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span></span>
<span id="cb637-3"><a href="lecon_carto.html#cb637-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>() <span class="sc">+</span></span>
<span id="cb637-4"><a href="lecon_carto.html#cb637-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>()</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-202-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
<div id="fonction-tm_polygons" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_polygons()<a href="lecon_carto.html#fonction-tm_polygons" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Par ailleurs, la fonction <code>tm_polygons()</code> est équivalente l’utilisation conjointe de <code>tm_borders()</code> et <code>tm_fill()</code>:</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="lecon_carto.html#cb638-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tm_polygons = tm_fill + tm_borders </span></span>
<span id="cb638-2"><a href="lecon_carto.html#cb638-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span></span>
<span id="cb638-3"><a href="lecon_carto.html#cb638-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_polygons</span>()</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-203-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
<div id="paramètres-esthétiques" class="section level5 unnumbered hasAnchor">
<h5>Paramètres esthétiques<a href="lecon_carto.html#paramètres-esthétiques" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Les fonctions <code>tm_borders()</code> et <code>tm_fill()</code> possèdent plusieurs arguments pour ajuster l’apparence de la carte. Voici des exemples:</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="lecon_carto.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="co"># couleur des polygones </span></span>
<span id="cb639-2"><a href="lecon_carto.html#cb639-2" aria-hidden="true" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span>
<span id="cb639-3"><a href="lecon_carto.html#cb639-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-4"><a href="lecon_carto.html#cb639-4" aria-hidden="true" tabindex="-1"></a><span class="co"># transparence</span></span>
<span id="cb639-5"><a href="lecon_carto.html#cb639-5" aria-hidden="true" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;green&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>)</span>
<span id="cb639-6"><a href="lecon_carto.html#cb639-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-7"><a href="lecon_carto.html#cb639-7" aria-hidden="true" tabindex="-1"></a><span class="co"># couleur des frontières</span></span>
<span id="cb639-8"><a href="lecon_carto.html#cb639-8" aria-hidden="true" tabindex="-1"></a>Q3 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span>
<span id="cb639-9"><a href="lecon_carto.html#cb639-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-10"><a href="lecon_carto.html#cb639-10" aria-hidden="true" tabindex="-1"></a><span class="co"># épaisseur du trait</span></span>
<span id="cb639-11"><a href="lecon_carto.html#cb639-11" aria-hidden="true" tabindex="-1"></a>Q4 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col=</span><span class="st">&quot;pink&quot;</span>, <span class="at">lwd =</span> <span class="dv">4</span>) </span>
<span id="cb639-12"><a href="lecon_carto.html#cb639-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-13"><a href="lecon_carto.html#cb639-13" aria-hidden="true" tabindex="-1"></a><span class="co"># type de trait</span></span>
<span id="cb639-14"><a href="lecon_carto.html#cb639-14" aria-hidden="true" tabindex="-1"></a>Q5 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>) </span>
<span id="cb639-15"><a href="lecon_carto.html#cb639-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-16"><a href="lecon_carto.html#cb639-16" aria-hidden="true" tabindex="-1"></a><span class="co"># couleur des polygones et des frontières</span></span>
<span id="cb639-17"><a href="lecon_carto.html#cb639-17" aria-hidden="true" tabindex="-1"></a>Q6 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb639-18"><a href="lecon_carto.html#cb639-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">col=</span><span class="st">&quot;black&quot;</span>)</span>
<span id="cb639-19"><a href="lecon_carto.html#cb639-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-20"><a href="lecon_carto.html#cb639-20" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Q1,Q2,Q3,Q4,Q5,Q6)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-204"></span>
<img src="Cours_SpatialR_files/figure-html/unnamed-chunk-204-1.png" alt="Cette figure est inspirée de la [figure 9.3](https://geocompr.robinlovelace.net/adv-map.html) du livre Geocomputation with R [@lovelace_geocomputation_2021]." width="720" />
<p class="caption">
FIGURE 6.1: Cette figure est inspirée de la <a href="https://geocompr.robinlovelace.net/adv-map.html">figure 9.3</a> du livre Geocomputation with R <span class="citation">(<a href="ressources.html#ref-lovelace_geocomputation_2021" role="doc-biblioref">Lovelace, Nowosad, and Muenchow 2021</a>)</span>.
</p>
</div>
<p><br></p>
<!--   Images des types de lignes
Rappel types de couleur
-->
</div>
</div>
<div id="attributs-des-polygones" class="section level4 unnumbered hasAnchor">
<h4>Attributs des polygones<a href="lecon_carto.html#attributs-des-polygones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>La création de cartes, à partir de données vectorielles de type polygone, nécessite parfois de colorer individuellement les polygones.
Par exemple, la couleur d’un polygone peut représenter la valeur d’un de ses attributs. Dans ce cas, nous utilisons la fonction <code>tm_fill()</code> en associat à l’argument <code>col</code> le nom de l`attribut que nous désirons illustrer.</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="lecon_carto.html#cb640-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Régions&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-205-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br>
Dans le cas ci-dessus, l’attribut illustré (<code>NUM_REG</code>) est catégorique et distinct pour chaque polygone.</p>
<p>Nous pouvons aussi choisir d’illustrer un seul des polygones d’un <em>shapefile</em>. Dans un tel cas, nous devons isoler le polygone désiré et n’illustrer que ce dernier avec la fonction <code>tm_shape()</code>. Par exemple, isolons le polygone correspondant à la région de l’Outaouais:</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="lecon_carto.html#cb641-1" aria-hidden="true" tabindex="-1"></a>Q_Outaouais <span class="ot">&lt;-</span> Q[Q<span class="sc">$</span>NOM_REG <span class="sc">==</span> <span class="st">&quot;Outaouais&quot;</span>,]</span>
<span id="cb641-2"><a href="lecon_carto.html#cb641-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q_Outaouais) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-206-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Nous pouvons également vouloir mettre l’emphase sur un polygone en particulier, en assignant une couleur seulement à celui-ci, tout en cartographiant l’ensemble des polygones. Dans ce cas, nous pouvons utiliser le caractère additif des objets <code>tmap</code>. Nous créons un premier objet représentant l’ensemble des polygones et nous lui additionnons un deuxième objet représentant le polygone que nous souhaitons mettre en évidence.</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="lecon_carto.html#cb642-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Une option</span></span>
<span id="cb642-2"><a href="lecon_carto.html#cb642-2" aria-hidden="true" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col=</span><span class="st">&quot;black&quot;</span>)</span>
<span id="cb642-3"><a href="lecon_carto.html#cb642-3" aria-hidden="true" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q_Outaouais) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>)</span>
<span id="cb642-4"><a href="lecon_carto.html#cb642-4" aria-hidden="true" tabindex="-1"></a>Q12 <span class="ot">&lt;-</span> Q1 <span class="sc">+</span> Q2</span>
<span id="cb642-5"><a href="lecon_carto.html#cb642-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb642-6"><a href="lecon_carto.html#cb642-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Une autre option</span></span>
<span id="cb642-7"><a href="lecon_carto.html#cb642-7" aria-hidden="true" tabindex="-1"></a>Q3 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>()</span>
<span id="cb642-8"><a href="lecon_carto.html#cb642-8" aria-hidden="true" tabindex="-1"></a>Q4 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q_Outaouais) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb642-9"><a href="lecon_carto.html#cb642-9" aria-hidden="true" tabindex="-1"></a>Q34 <span class="ot">&lt;-</span> Q3 <span class="sc">+</span> Q4</span>
<span id="cb642-10"><a href="lecon_carto.html#cb642-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb642-11"><a href="lecon_carto.html#cb642-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Q12,Q34)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-207-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Remarquer l’usage de la fonction <code>tmap_arrange()</code> pour afficher des cartes côte-à-côte.</p>
</div>
</div>
<div id="spécificités-cartographiques" class="section level3 hasAnchor" number="6.1.5">
<h3><span class="header-section-number">6.1.5</span> Spécificités cartographiques<a href="lecon_carto.html#spécificités-cartographiques" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="barre-déchelle-et-rose-des-vents" class="section level4 unnumbered hasAnchor">
<h4>Barre d’échelle et rose des vents<a href="lecon_carto.html#barre-déchelle-et-rose-des-vents" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fonctions-tm_scale_bar-et-tm_compass" class="section level6 unnumbered hasAnchor">
<h6>Fonctions tm_scale_bar() et tm_compass<a href="lecon_carto.html#fonctions-tm_scale_bar-et-tm_compass" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>L’ajout d’un barre d’échelle et d’une rose des vents, se fait par l’utilisation des fonctions <code>tm_scale_bar()</code> et <code>tm_compass()</code> respectivement:</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="lecon_carto.html#cb643-1" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span>   <span class="co"># la carte du Québec que nous avons créée plus haut</span></span>
<span id="cb643-2"><a href="lecon_carto.html#cb643-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ajout d&#39;une barre d&#39;échelle</span></span>
<span id="cb643-3"><a href="lecon_carto.html#cb643-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">250</span>,<span class="dv">500</span>),</span>
<span id="cb643-4"><a href="lecon_carto.html#cb643-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">text.size =</span> <span class="fl">0.8</span>, </span>
<span id="cb643-5"><a href="lecon_carto.html#cb643-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position=</span><span class="fu">c</span>(<span class="st">&quot;right&quot;</span>,<span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span></span>
<span id="cb643-6"><a href="lecon_carto.html#cb643-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ajout d&#39;une rose des vents</span></span>
<span id="cb643-7"><a href="lecon_carto.html#cb643-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">&quot;arrow&quot;</span>, </span>
<span id="cb643-8"><a href="lecon_carto.html#cb643-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>))</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-208-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>où l’argument <code>break</code> précise les divisions sur la barre d’échelle, <code>text.size</code> la taille du texte sous la barre, et <code>position</code> la position de la barre sur la carte (gauche ou droite, haut ou bas).</p>
<p>Plusieurs options d’arguments sont possibles. Utilisez <code>help(tm_scale_bar)</code> ou <code>help(tm_compass)</code> pour connaître les autres arguments possibles pour ces fonctions. Par exemple,</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="lecon_carto.html#cb644-1" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span>   </span>
<span id="cb644-2"><a href="lecon_carto.html#cb644-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="dv">2</span>, </span>
<span id="cb644-3"><a href="lecon_carto.html#cb644-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">position=</span><span class="fu">c</span>(<span class="st">&quot;right&quot;</span>,<span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span></span>
<span id="cb644-4"><a href="lecon_carto.html#cb644-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">&quot;4star&quot;</span>,</span>
<span id="cb644-5"><a href="lecon_carto.html#cb644-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb644-6"><a href="lecon_carto.html#cb644-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">show.labels =</span> <span class="dv">2</span>, </span>
<span id="cb644-7"><a href="lecon_carto.html#cb644-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>))</span></code></pre></div>
<pre><code>Scale bar width set to 0.25 of the map width</code></pre>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-209-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
</div>
<div id="grille-et-graticules" class="section level4 unnumbered hasAnchor">
<h4>Grille et graticules<a href="lecon_carto.html#grille-et-graticules" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fonctions-tm_grid-et-tm_borders" class="section level6 unnumbered hasAnchor">
<h6>Fonctions tm_grid() et tm_borders()<a href="lecon_carto.html#fonctions-tm_grid-et-tm_borders" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_grid()</code> ajoute une grille à la carte selon le système de coordonnées projetées des données. Dans le cas présent, le <em>shapefile</em> <code>Q</code> est exprimé dans le système de coordonnées projetée Conique conforme de Lambert (epsg:32198) qui est métrique.</p>
<p>La fonction <code>tm_graticules</code> ajoute les lignes de longitude et de latitude du système de coordonnées géographiques, c’est-à-dire non-projetées. Dans le cas présent, le <em>shapefile</em> <code>Q</code> est exprimé dans le système de coordonnées géographiques du Datum North Américain de 1983 (NAD83, espg:4269).</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="lecon_carto.html#cb646-1" aria-hidden="true" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> map_Q <span class="sc">+</span> <span class="fu">tm_grid</span>()</span>
<span id="cb646-2"><a href="lecon_carto.html#cb646-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb646-3"><a href="lecon_carto.html#cb646-3" aria-hidden="true" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> map_Q <span class="sc">+</span> <span class="fu">tm_graticules</span>()</span>
<span id="cb646-4"><a href="lecon_carto.html#cb646-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb646-5"><a href="lecon_carto.html#cb646-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Q1,Q2)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-210-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Plusieurs options d’arguments existent pour les fonctions <code>tm_grid()</code> et <code>tm_graticules()</code>. Par exemple, il est possible de préciser le nombre de divisions sur l’axe des <em>x</em> (<code>n.x</code>) et sur l’axe des <em>y</em> (<code>n.y</code>)<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a>, l’épaisseur du trait (<code>lwd</code>), la couleur (<code>col</code>) ou encore la taille de l’écriture (<code>labels.size</code>).</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="lecon_carto.html#cb647-1" aria-hidden="true" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> map_Q <span class="sc">+</span> <span class="fu">tm_grid</span>(<span class="at">labels.size=</span><span class="fl">0.5</span>, </span>
<span id="cb647-2"><a href="lecon_carto.html#cb647-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col=</span><span class="st">&quot;yellow&quot;</span>, </span>
<span id="cb647-3"><a href="lecon_carto.html#cb647-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">lwd=</span><span class="dv">3</span>, </span>
<span id="cb647-4"><a href="lecon_carto.html#cb647-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">n.x =</span> <span class="dv">10</span>, <span class="at">n.y =</span> <span class="dv">4</span>)</span>
<span id="cb647-5"><a href="lecon_carto.html#cb647-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-6"><a href="lecon_carto.html#cb647-6" aria-hidden="true" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> map_Q <span class="sc">+</span> <span class="fu">tm_graticules</span>(<span class="at">labels.col =</span> <span class="st">&quot;darkblue&quot;</span>, </span>
<span id="cb647-7"><a href="lecon_carto.html#cb647-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> <span class="fl">0.3</span>, </span>
<span id="cb647-8"><a href="lecon_carto.html#cb647-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">labels.cardinal =</span> <span class="cn">FALSE</span>)</span>
<span id="cb647-9"><a href="lecon_carto.html#cb647-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-10"><a href="lecon_carto.html#cb647-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Q1,Q2)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-211-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
</div>
<div id="attribuer-les-crédits-ou-la-source-des-données" class="section level4 unnumbered hasAnchor">
<h4>Attribuer les crédits ou la source des données<a href="lecon_carto.html#attribuer-les-crédits-ou-la-source-des-données" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fonction-tm_credits" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_credits()<a href="lecon_carto.html#fonction-tm_credits" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Il faut utiliser la fonction <code>tm_credits()</code> pour ajouter à la carte une mention sur la source des données, ou toute autre information comme l’auteur ou l’autrice de la carte et son organisation d’attache. Par défaut, la mention apparaît dans le coin inférieur droit.</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="lecon_carto.html#cb648-1" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span> </span>
<span id="cb648-2"><a href="lecon_carto.html#cb648-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">&quot;Données récupérées </span><span class="sc">\n</span><span class="st">sur le site donneesquebec.ca&quot;</span>, </span>
<span id="cb648-3"><a href="lecon_carto.html#cb648-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.6</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-212-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
</div>
</div>
<div id="mise-en-page" class="section level3 hasAnchor" number="6.1.6">
<h3><span class="header-section-number">6.1.6</span> Mise en page<a href="lecon_carto.html#mise-en-page" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="fonction-tm_layout" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_layout()<a href="lecon_carto.html#fonction-tm_layout" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_layout</code> permet d’ajuster la mise en page d’une carte et différents éléments de son esthétique. Pour découvrir l’ensemble des arguments possibles tapez la commande <code>help(tm_layout)</code> (ou <code>?tm_layout</code>) dans votre console R. Plusieurs des arguments utiles sont présentés ci-dessous.</p>
</div>
<div id="titre-cadre-et-couleur-du-fond" class="section level4 unnumbered hasAnchor">
<h4>Titre, cadre et couleur du fond<a href="lecon_carto.html#titre-cadre-et-couleur-du-fond" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>L’ajout d’un titre (<code>title</code>), la taille de ce dernier (<code>title.size</code>) et sa position (<code>title.position</code>).</li>
<li>La présence ou l’absence d’un cadre (<code>frame</code>) et l’épaisseur du trait de celui-ci (<code>frame.lw</code>).</li>
<li>La taille des marges extérieures au cadre: <code>outer.margins = c(Haut,Droit,Bas,Gauche)</code> où <code>Haut</code>, <code>Droit</code>, <code>Bas</code>, <code>Gauche</code> sont des chiffres entre 0 (pas de marge) et 1 (marge complète).</li>
<li>La couleur du fond de la carte (<code>bg.color</code>) et de l’espace à l’extérieure du cadre (<code>outer.bg.color</code>).</li>
</ul>
<p>Voici quelques exemples de mise en page qui utilisent ces arguments.</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="lecon_carto.html#cb649-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création d&#39;une carte générale</span></span>
<span id="cb649-2"><a href="lecon_carto.html#cb649-2" aria-hidden="true" tabindex="-1"></a>map_Q <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>() <span class="sc">+</span> <span class="fu">tm_borders</span>()</span>
<span id="cb649-3"><a href="lecon_carto.html#cb649-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-4"><a href="lecon_carto.html#cb649-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Différentes options de mise en page</span></span>
<span id="cb649-5"><a href="lecon_carto.html#cb649-5" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">title =</span> <span class="st">&quot;Carte du Québec&quot;</span>, <span class="at">title.size =</span><span class="fl">0.8</span>, <span class="at">title.position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>,<span class="st">&quot;top&quot;</span>))</span>
<span id="cb649-6"><a href="lecon_carto.html#cb649-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-7"><a href="lecon_carto.html#cb649-7" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>)</span>
<span id="cb649-8"><a href="lecon_carto.html#cb649-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-9"><a href="lecon_carto.html#cb649-9" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">bg.color =</span> <span class="st">&quot;aquamarine&quot;</span>, <span class="at">scale =</span> <span class="dv">2</span>)</span>
<span id="cb649-10"><a href="lecon_carto.html#cb649-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-11"><a href="lecon_carto.html#cb649-11" aria-hidden="true" tabindex="-1"></a>map_Q <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">frame.lwd =</span> <span class="dv">2</span>, <span class="at">outer.margins =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.2</span>,<span class="dv">0</span>, <span class="fl">0.2</span>), <span class="at">outer.bg.color=</span><span class="st">&quot;lavender&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-214-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
<div id="légende" class="section level4 unnumbered hasAnchor">
<h4>Légende<a href="lecon_carto.html#légende" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>La fonction <code>tm_layout()</code> permet aussi de configurer l’apparence de la légende. Certains des arguments utiles sont:</p>
<ul>
<li>La présence, ou non, d’une légende (<code>legend.show</code>). Par défaut la légende est affichée.</li>
<li>L’option de placer la légende à l’extérieur du cadre de la figure (<code>legend.outside</code>).</li>
<li>La position de la légende à l’intérieur (<code>legend.position</code>) ou à l’extérieur (<code>legend.outside.position</code>) du cadre. Par défaut,la légende est placée dans le coin où il y a le plus d’espace.</li>
<li>L’option de mettre un cadre autour de la légende (<code>legend.frame</code>) et de définir l’épaisseur du trait (<code>legend.frame.lwd</code>) et la couleur de fond de la légende (<code>legend.bg.color</code>)</li>
<li>La police de caractère (<code>legend.title.fontfamily</code>), la taille des caractères (<code>legend.title.fontface</code>), et la couleur (<code>legend.title.color</code>) du texte et du titre de la légende.</li>
</ul>
<p>Voici quelques exemples de mise en page de la légende:</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb650-1"><a href="lecon_carto.html#cb650-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb650-2"><a href="lecon_carto.html#cb650-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;NOM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb650-3"><a href="lecon_carto.html#cb650-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>)</span>
<span id="cb650-4"><a href="lecon_carto.html#cb650-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb650-5"><a href="lecon_carto.html#cb650-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span></span>
<span id="cb650-6"><a href="lecon_carto.html#cb650-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;NUM_REG&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Régions administratives&quot;</span>, </span>
<span id="cb650-7"><a href="lecon_carto.html#cb650-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.is.portrait =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb650-8"><a href="lecon_carto.html#cb650-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb650-9"><a href="lecon_carto.html#cb650-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside.position =</span> <span class="st">&quot;bottom&quot;</span>, </span>
<span id="cb650-10"><a href="lecon_carto.html#cb650-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside.size =</span> <span class="fl">0.15</span>, </span>
<span id="cb650-11"><a href="lecon_carto.html#cb650-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.text.size =</span> <span class="fl">0.75</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-216-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="lecon_carto.html#cb651-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb651-2"><a href="lecon_carto.html#cb651-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">&quot;NOM_REG&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Régions administratives&quot;</span>) <span class="sc">+</span> </span>
<span id="cb651-3"><a href="lecon_carto.html#cb651-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-218-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="lecon_carto.html#cb652-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb652-2"><a href="lecon_carto.html#cb652-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col=</span><span class="st">&quot;NOM_REG&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Régions administratives&quot;</span>) <span class="sc">+</span> </span>
<span id="cb652-3"><a href="lecon_carto.html#cb652-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">bg.color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb652-4"><a href="lecon_carto.html#cb652-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside.position =</span> <span class="st">&quot;left&quot;</span>, </span>
<span id="cb652-5"><a href="lecon_carto.html#cb652-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.title.fontfamily =</span> <span class="st">&quot;serif&quot;</span>, </span>
<span id="cb652-6"><a href="lecon_carto.html#cb652-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.title.fontface =</span> <span class="dv">2</span>, </span>
<span id="cb652-7"><a href="lecon_carto.html#cb652-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.title.color =</span> <span class="st">&quot;lightpink&quot;</span>, </span>
<span id="cb652-8"><a href="lecon_carto.html#cb652-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.text.color =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-220-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<!--   


```
Some legend labels were too wide. These labels have been resized to 0.48, 0.56. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger.
```

```
Legend labels were too wide. Therefore, legend.text.size has been set to 0.47. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger.
```

```
Some legend labels were too wide. These labels have been resized to 0.48, 0.56. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger.
```

<img src="Cours_SpatialR_files/figure-html/unnamed-chunk-221-1.png" width="720" style="display: block; margin: auto;" />

-->
</div>
<div id="ajustement-des-couleurs" class="section level4 unnumbered hasAnchor">
<h4>Ajustement des couleurs<a href="lecon_carto.html#ajustement-des-couleurs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>De plus, la fonction tm_layout permet d’ajuster les couleurs présentes dans la carte:</p>
<ul>
<li>L’argument <code>aes.color</code> défini la couleur de remplissage des polygones, des frontières, du texte, etc.</li>
<li>L’argument <code>saturation</code> défini le niveau de saturation des couleurs. La valeur par défaut est 1, et la valeur 0 donne une représentation en noir et blanc. Il est possible de donner des valeurs supérieures à 1 pour des couleurs très saturées. Il est aussi possible de données des valeurs négatives.</li>
<li>L’argument <code>sepia.intensity</code> est un nombre entre 0 et 1 qui défini le niveau de “chaleur” des couleurs. Plus sa valeur est grande, plus les couleurs ont une teinte jaune voir brune. La valeur par défaut est 0.</li>
<li>L’argument <code>aes.palette</code> permet de changer la palette de couleurs utilisées. La librarie <code>tmap</code> utilise les palettes de couleurs de <a href="https://colorbrewer2.org/">Color Brewer</a>. Dans le cas d’attributs catégoriques (comme le nom de régions) la palette utilisée par défaut se nomme <code>Set3</code>, mais il est possible de choisir d’autres palettes parmi celles-ci: <code>Accent</code>, <code>Dark2</code>, <code>Paired</code>, <code>Pastel1</code>, <code>Pastel2</code>, <code>Set1</code>, et <code>Set2</code>. Nous reviendrons sur le sujet des palettes un peu plus loin dans cete leçon.</li>
</ul>
<p>Voici quelques exemples de modification des couleurs:</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="lecon_carto.html#cb653-1" aria-hidden="true" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>() <span class="sc">+</span> </span>
<span id="cb653-2"><a href="lecon_carto.html#cb653-2" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tm_layout</span>(<span class="at">aes.color =</span> <span class="fu">c</span>(<span class="at">fill=</span><span class="st">&quot;lightblue&quot;</span>,<span class="at">borders=</span><span class="st">&quot;darkgreen&quot;</span>))</span>
<span id="cb653-3"><a href="lecon_carto.html#cb653-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-4"><a href="lecon_carto.html#cb653-4" aria-hidden="true" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb653-5"><a href="lecon_carto.html#cb653-5" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>,</span>
<span id="cb653-6"><a href="lecon_carto.html#cb653-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">aes.color =</span> <span class="fu">c</span>(<span class="at">borders=</span><span class="st">&quot;white&quot;</span>),</span>
<span id="cb653-7"><a href="lecon_carto.html#cb653-7" aria-hidden="true" tabindex="-1"></a>                              <span class="at">saturation =</span> <span class="dv">0</span>)</span>
<span id="cb653-8"><a href="lecon_carto.html#cb653-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-9"><a href="lecon_carto.html#cb653-9" aria-hidden="true" tabindex="-1"></a>Q3 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb653-10"><a href="lecon_carto.html#cb653-10" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>,</span>
<span id="cb653-11"><a href="lecon_carto.html#cb653-11" aria-hidden="true" tabindex="-1"></a>                              <span class="at">sepia.intensity =</span> <span class="fl">0.5</span>)</span>
<span id="cb653-12"><a href="lecon_carto.html#cb653-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-13"><a href="lecon_carto.html#cb653-13" aria-hidden="true" tabindex="-1"></a>Q4 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb653-14"><a href="lecon_carto.html#cb653-14" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, </span>
<span id="cb653-15"><a href="lecon_carto.html#cb653-15" aria-hidden="true" tabindex="-1"></a>                              <span class="at">aes.palette =</span> <span class="fu">list</span>(<span class="at">cat =</span> <span class="st">&quot;Accent&quot;</span>))</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-223-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="styles-prédéfinis" class="section level4 unnumbered hasAnchor">
<h4>Styles prédéfinis<a href="lecon_carto.html#styles-prédéfinis" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fonction-tm_style" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_style()<a href="lecon_carto.html#fonction-tm_style" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La librarie <code>tmap</code> contient des styles prédéfinis qu’on appelle avec la fonction <code>tm_style</code> et qui permettent de ne pas avoir à définir individuellement des arguments de la fonction <code>tm_layout</code>.</p>
<p>Voici quelques uns de ces styles prédéfinis.</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="lecon_carto.html#cb654-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb654-2"><a href="lecon_carto.html#cb654-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_style</span>(<span class="st">&quot;classic&quot;</span>) <span class="sc">+</span></span>
<span id="cb654-3"><a href="lecon_carto.html#cb654-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>) </span>
<span id="cb654-4"><a href="lecon_carto.html#cb654-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-5"><a href="lecon_carto.html#cb654-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb654-6"><a href="lecon_carto.html#cb654-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_style</span>(<span class="st">&quot;bw&quot;</span>) <span class="sc">+</span></span>
<span id="cb654-7"><a href="lecon_carto.html#cb654-7" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>) </span>
<span id="cb654-8"><a href="lecon_carto.html#cb654-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-9"><a href="lecon_carto.html#cb654-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span></span>
<span id="cb654-10"><a href="lecon_carto.html#cb654-10" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_style</span>(<span class="st">&quot;cobalt&quot;</span>) <span class="sc">+</span></span>
<span id="cb654-11"><a href="lecon_carto.html#cb654-11" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>) </span>
<span id="cb654-12"><a href="lecon_carto.html#cb654-12" aria-hidden="true" tabindex="-1"></a>                                            </span>
<span id="cb654-13"><a href="lecon_carto.html#cb654-13" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb654-14"><a href="lecon_carto.html#cb654-14" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_style</span>(<span class="st">&quot;col_blind&quot;</span>) <span class="sc">+</span>                             </span>
<span id="cb654-15"><a href="lecon_carto.html#cb654-15" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>) </span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-225-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
<p>Vous remarquerez que le style <code>col_blind</code> utilise une palette de couleur permettant aux personnes daltoniennes de pouvoir différencier les polygones de couleurs différentes.</p>
</div>
</div>
</div>
<div id="écriture-sur-une-carte" class="section level3 hasAnchor" number="6.1.7">
<h3><span class="header-section-number">6.1.7</span> Écriture sur une carte<a href="lecon_carto.html#écriture-sur-une-carte" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="fonction-tm_text" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_text()<a href="lecon_carto.html#fonction-tm_text" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<!-- 
Attention tm_text() ne donne pas les bonnes info ici:https://www.rdocumentation.org/packages/tmap/versions/0.7/topics/tm_text
Il faut aller ici: https://rdrr.io/cran/tmap/man/tm_text.html
  -->
<p>La fonction <code>tm_text()</code> permet d’écrire sur chaque polygone la valeur d’un de ses attributs.
Par exemple, nous pouvons ajouter le numéro de la région administrative sur chaque polygone:</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="lecon_carto.html#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>) <span class="sc">+</span> </span>
<span id="cb655-2"><a href="lecon_carto.html#cb655-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_style</span>(<span class="st">&quot;col_blind&quot;</span>) <span class="sc">+</span> </span>
<span id="cb655-3"><a href="lecon_carto.html#cb655-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb655-4"><a href="lecon_carto.html#cb655-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_text</span>(<span class="st">&quot;NUM_REG&quot;</span>, <span class="at">size =</span> <span class="fl">0.6</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-226-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Ou encore:</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="lecon_carto.html#cb656-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb656-2"><a href="lecon_carto.html#cb656-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_layout</span>(<span class="at">aes.color =</span> <span class="fu">c</span>(<span class="at">fill=</span><span class="st">&quot;black&quot;</span>,<span class="at">borders=</span><span class="st">&quot;white&quot;</span>),</span>
<span id="cb656-3"><a href="lecon_carto.html#cb656-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">bg.color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb656-4"><a href="lecon_carto.html#cb656-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb656-5"><a href="lecon_carto.html#cb656-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.bg.color =</span> <span class="cn">TRUE</span>,</span>
<span id="cb656-6"><a href="lecon_carto.html#cb656-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb656-7"><a href="lecon_carto.html#cb656-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.text.size =</span> <span class="fl">0.8</span>,</span>
<span id="cb656-8"><a href="lecon_carto.html#cb656-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.text.color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb656-9"><a href="lecon_carto.html#cb656-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.title.color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb656-10"><a href="lecon_carto.html#cb656-10" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_text</span>(<span class="st">&quot;NUM_REG&quot;</span>, <span class="at">col=</span> <span class="st">&quot;NOM_REG&quot;</span>, </span>
<span id="cb656-11"><a href="lecon_carto.html#cb656-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>, </span>
<span id="cb656-12"><a href="lecon_carto.html#cb656-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">size =</span> <span class="fl">0.8</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>, </span>
<span id="cb656-13"><a href="lecon_carto.html#cb656-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">legend.col.show =</span> <span class="cn">TRUE</span>, </span>
<span id="cb656-14"><a href="lecon_carto.html#cb656-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">title.col =</span> <span class="st">&quot;Régions administratives&quot;</span>,</span>
<span id="cb656-15"><a href="lecon_carto.html#cb656-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">auto.placement=</span><span class="cn">TRUE</span>, </span>
<span id="cb656-16"><a href="lecon_carto.html#cb656-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">just=</span><span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-227-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
</div>
<div id="les-lignes" class="section level3 hasAnchor" number="6.1.8">
<h3><span class="header-section-number">6.1.8</span> Les lignes<a href="lecon_carto.html#les-lignes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="données-sur-le-réseau-routier-du-québec" class="section level5 unnumbered hasAnchor">
<h5>Données sur le réseau routier du Québec<a href="lecon_carto.html#données-sur-le-réseau-routier-du-québec" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Pour explorer les options d’affichage de données vectorielles de types ligne et multiligne, nous utilisons le <em>shapefile</em> du réseau des routes du Québec. Chargeons ces données dans notre session de travail R avec la fonction <code>st_read()</code>:</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="lecon_carto.html#cb657-1" aria-hidden="true" tabindex="-1"></a>Ro <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;Module6/Module6_donnees/Routes/QC_routes.shp&quot;</span>)</span></code></pre></div>
<pre class="codeout"><code>Reading layer `QC_routes&#39; from data source 
  `E:\ELF\Dropbox\Teluq\Enseignement\Cours\SCI1031\Developpement\Structure_test\sci1031\Module6\Module6_donnees\Routes\QC_routes.shp&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 223 features and 2 fields
Geometry type: MULTILINESTRING
Dimension:     XY
Bounding box:  xmin: -822900 ymin: 118000 xmax: 526000 ymax: 983200
Projected CRS: NAD83 / Quebec Lambert</code></pre>
<p><br></p>
<p>Observer la structure et les attributs du <em>shapefile</em> <code>Ro</code>. Celui-ci contient 223 multilignes et 2 attributs autres que la géométrie:</p>
<ul>
<li><code>NoRte</code>: le numéro de la route,</li>
<li><code>ClsRte</code>: la classe de la route.</li>
</ul>
<p>En particulier, il existe trois classes possibles de route:</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="lecon_carto.html#cb659-1" aria-hidden="true" tabindex="-1"></a>Ro<span class="sc">$</span>ClsRte <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Ro<span class="sc">$</span>ClsRte)</span>
<span id="cb659-2"><a href="lecon_carto.html#cb659-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(Ro<span class="sc">$</span>ClsRte)</span></code></pre></div>
<pre class="codeout"><code>[1] &quot;Autoroute&quot; &quot;Nationale&quot; &quot;Régionale&quot;</code></pre>
<p><br></p>
<div id="fonction-tm_lines" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_lines()<a href="lecon_carto.html#fonction-tm_lines" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La bibliothèque <code>tmap</code> possède une fonction particulière pour illustrer des objects vectoriels de type ligne et multigne. Il s’agit de la fonction <code>tm_lines()</code>. Celle-ci doit être ajouter à la fonction <code>tm_shape(L)</code> où <code>L</code> est un <em>shapefile</em> contenant des objets de géométrie ligne ou multiligne.</p>
<p>Illustrons les multilignes du <em>shapefile</em> <code>Ro</code>:</p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="lecon_carto.html#cb661-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Ro) <span class="sc">+</span> <span class="fu">tm_lines</span>()</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-230-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Pour superposer la carte des routes sur la carte du Québec, nous utilisons la propriété additive des objets <code>tmap</code>.</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="lecon_carto.html#cb662-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>() <span class="sc">+</span></span>
<span id="cb662-2"><a href="lecon_carto.html#cb662-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Ro) <span class="sc">+</span> <span class="fu">tm_lines</span>(<span class="at">col=</span><span class="st">&quot;brown&quot;</span>) <span class="sc">+</span></span>
<span id="cb662-3"><a href="lecon_carto.html#cb662-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">title =</span> <span class="st">&quot;Réseau routier&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-231-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Notez que chaque fois qu’on ajoute un nouvel ensemble de données à cartographier en utilisant <code>tm_shape(nouvelles_donnees)</code>, les fonctions <code>tm_fonctions()</code> qui suivent s’appliquent à ces nouvelles données et non aux données antérieures.</p>
<p>Pour représenter différemment les objets de type ligne en fonction de la valeur d’un de leur attribut, nous pouvons utiliser l’argument <code>col</code> dans la fonction <code>tm_lines</code>:</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="lecon_carto.html#cb663-1" aria-hidden="true" tabindex="-1"></a><span class="co"># créons une palette de trois couleurs</span></span>
<span id="cb663-2"><a href="lecon_carto.html#cb663-2" aria-hidden="true" tabindex="-1"></a>pal.col<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;darkgoldenrod4&quot;</span>,<span class="st">&quot;darkslateblue&quot;</span>)</span>
<span id="cb663-3"><a href="lecon_carto.html#cb663-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-4"><a href="lecon_carto.html#cb663-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span></span>
<span id="cb663-5"><a href="lecon_carto.html#cb663-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>() <span class="sc">+</span></span>
<span id="cb663-6"><a href="lecon_carto.html#cb663-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Ro) <span class="sc">+</span></span>
<span id="cb663-7"><a href="lecon_carto.html#cb663-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;ClsRte&quot;</span>, </span>
<span id="cb663-8"><a href="lecon_carto.html#cb663-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> pal.col, </span>
<span id="cb663-9"><a href="lecon_carto.html#cb663-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.col =</span> <span class="st">&quot;Types de route&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-232-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
</div>
</div>
<div id="les-points" class="section level3 hasAnchor" number="6.1.9">
<h3><span class="header-section-number">6.1.9</span> Les points<a href="lecon_carto.html#les-points" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="coordonnées-des-municipalités-du-québec" class="section level5 unnumbered hasAnchor">
<h5>Coordonnées des municipalités du Québec<a href="lecon_carto.html#coordonnées-des-municipalités-du-québec" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Pour explorer les options d’affichage de données vectorielles de types point et multipoint, nous utilisons le <em>shapefile</em> des coordonnées géographiques de quelques municipalités du Québec. Chargeons ces données dans notre session de travail R avec la fonction <code>st_read()</code>:</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="lecon_carto.html#cb664-1" aria-hidden="true" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;Module6/Module6_donnees/Villes/QC_coord_municipalites.shp&quot;</span>)</span></code></pre></div>
<pre class="codeout"><code>Reading layer `QC_coord_municipalites&#39; from data source `E:\ELF\Dropbox\Teluq\Enseignement\Cours\SCI1031\Developpement\Structure_test\sci1031\Module6\Module6_donnees\Villes\QC_coord_municipalites.shp&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 15 features and 1 field
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -78.91 ymin: 45.41 xmax: -64.47 ymax: 62.41
Geodetic CRS:  NAD83</code></pre>
<p><br></p>
<p>Ce <em>shapefile</em> compte 15 objets de type point et un seul attribut (<code>Mncplts</code>) correspondant au nom de la municipalité qui lui est associée.</p>
<p>La bibliothèque <code>tmap</code> comprend plusieurs fonctions permettant de représenter des données de type point. Familiarisons-nous d’abord avec les fonctions <code>tm_dots()</code> et <code>tm_markers()</code>. Nous verrons plus loin les fonctions <code>tm_bubbles()</code> et <code>tm_symbols()</code>.</p>
<div id="fonction-tm_dots" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_dots()<a href="lecon_carto.html#fonction-tm_dots" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_dots()</code> fonctionne de façon similaire aux fonctions <code>tm_polygons()</code> et <code>tm_lines()</code>. Il suffit de l’ajouté à la fonction <code>tm_shape(P)</code> où <code>P</code> est un <em>shapefile</em> de types point ou multipoint.</p>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="lecon_carto.html#cb666-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Juste les points</span></span>
<span id="cb666-2"><a href="lecon_carto.html#cb666-2" aria-hidden="true" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(V) <span class="sc">+</span> <span class="fu">tm_dots</span>()</span>
<span id="cb666-3"><a href="lecon_carto.html#cb666-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-4"><a href="lecon_carto.html#cb666-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Les points et la carte du QC</span></span>
<span id="cb666-5"><a href="lecon_carto.html#cb666-5" aria-hidden="true" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb666-6"><a href="lecon_carto.html#cb666-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tm_shape</span>(V) <span class="sc">+</span> <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb666-7"><a href="lecon_carto.html#cb666-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-8"><a href="lecon_carto.html#cb666-8" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb666-9"><a href="lecon_carto.html#cb666-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Q1,Q2)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-234-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Nous pouvons également définir la couleur des points en fonction de la valeur de leur attribut.</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="lecon_carto.html#cb667-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>() <span class="sc">+</span></span>
<span id="cb667-2"><a href="lecon_carto.html#cb667-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(V) <span class="sc">+</span> <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;Mncplts&quot;</span>, </span>
<span id="cb667-3"><a href="lecon_carto.html#cb667-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>, </span>
<span id="cb667-4"><a href="lecon_carto.html#cb667-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb667-5"><a href="lecon_carto.html#cb667-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb667-6"><a href="lecon_carto.html#cb667-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb667-7"><a href="lecon_carto.html#cb667-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">title =</span> <span class="st">&quot;Municipalités&quot;</span>, </span>
<span id="cb667-8"><a href="lecon_carto.html#cb667-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">legend.title.color =</span> <span class="cn">NA</span>, </span>
<span id="cb667-9"><a href="lecon_carto.html#cb667-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">legend.text.size =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-235-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
</div>
<div id="fonction-tm_markers" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_markers()<a href="lecon_carto.html#fonction-tm_markers" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_markers()</code> représente les points par le symbole de repère géographique:</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="lecon_carto.html#cb668-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_fill</span>() <span class="sc">+</span></span>
<span id="cb668-2"><a href="lecon_carto.html#cb668-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(V) <span class="sc">+</span> <span class="fu">tm_markers</span>(<span class="at">size =</span> <span class="fl">0.5</span>, </span>
<span id="cb668-3"><a href="lecon_carto.html#cb668-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">text =</span> <span class="st">&quot;Mncplts&quot;</span>, </span>
<span id="cb668-4"><a href="lecon_carto.html#cb668-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">text.size =</span> <span class="fl">0.8</span>, </span>
<span id="cb668-5"><a href="lecon_carto.html#cb668-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">text.just =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span></span>
<span id="cb668-6"><a href="lecon_carto.html#cb668-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tm_layout</span>(<span class="at">inner.margins =</span> <span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.2</span>,<span class="fl">0.1</span>,<span class="fl">0.2</span>))</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-236-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>La fonction <code>tm_markers()</code> permet d’ajouter du texte facilement sur les repères et contient des arguments similaires à la fonction <code>tm_text()</code>.</p>
</div>
</div>
</div>
<div id="données-matricielles" class="section level3 hasAnchor" number="6.1.10">
<h3><span class="header-section-number">6.1.10</span> Données matricielles<a href="lecon_carto.html#données-matricielles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="données-délévation-du-québec" class="section level5 unnumbered hasAnchor">
<h5>Données d’élévation du Québec<a href="lecon_carto.html#données-délévation-du-québec" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Pour explorer les options d’affichage de données matricielles, nous utilisons un <em>raster</em> représentant le relief du territoire québecois sous forme d’une matrice d’élévation. Chargeons ces données dans notre session de travail R avec la fonction <code>raster()</code>. Nous devons prélablement charger la bibliothèque <code>raster</code>:</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="lecon_carto.html#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb669-2"><a href="lecon_carto.html#cb669-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-3"><a href="lecon_carto.html#cb669-3" aria-hidden="true" tabindex="-1"></a>E <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Module6/Module6_donnees/Elevation/QC_Elevation.tif&quot;</span>)</span></code></pre></div>
<p><br></p>
<p>Le <em>raster</em> <code>E</code> est une matrice de 810612 cellules, et chacune de ces cellules a une résolution d’environ 2 km par 2 km. La valeur maximale d’élévation est de 1592 m.</p>
<div id="fonction-tm_raster" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_raster()<a href="lecon_carto.html#fonction-tm_raster" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_raster()</code> de la bibliothèque <code>tmap</code> permet de visualiser les <em>rasters</em> en assignant des couleurs différentes pour des classes de valeurs différentes. L’argument <code>n</code> sert à préciser le nombre approximatif de classes à utiliser.</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="lecon_carto.html#cb670-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(E) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">title =</span> <span class="st">&quot;Élévation (m)&quot;</span>)</span>
<span id="cb670-2"><a href="lecon_carto.html#cb670-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(E) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">title =</span> <span class="st">&quot;Élévation (m)&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-239-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Il est possible d’afficher en légende un histogramme illustrant la distribution des valeurs. Par exemple:</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="lecon_carto.html#cb671-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(E) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb671-2"><a href="lecon_carto.html#cb671-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">title =</span> <span class="st">&quot;Élévation (m)&quot;</span>,</span>
<span id="cb671-3"><a href="lecon_carto.html#cb671-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">legend.hist =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb671-4"><a href="lecon_carto.html#cb671-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb671-5"><a href="lecon_carto.html#cb671-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">hist.width =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-240-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Par défaut, la palette de couleur utilisée est la palette séquentielle <code>YlOrBr</code> de <a href="https://colorbrewer2.org/">ColorBrewer</a> (de jaune à brun en passant par orange). Or, nous pouvons changer la palette de couleur. Utilisons, par exemple, la fonction <code>colorRampPalette()</code> pour créer notre propre palette de couleur.</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="lecon_carto.html#cb672-1" aria-hidden="true" tabindex="-1"></a>pal.elevation <span class="ot">=</span> <span class="fu">colorRampPalette</span>( <span class="fu">c</span>(<span class="st">&quot;midnightblue&quot;</span>,<span class="st">&quot;forestgreen&quot;</span>,</span>
<span id="cb672-2"><a href="lecon_carto.html#cb672-2" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&quot;darkolivegreen4&quot;</span>,<span class="st">&quot;burlywood&quot;</span>, </span>
<span id="cb672-3"><a href="lecon_carto.html#cb672-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&quot;chocolate4&quot;</span>))</span>
<span id="cb672-4"><a href="lecon_carto.html#cb672-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-5"><a href="lecon_carto.html#cb672-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(E) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">n =</span> <span class="dv">10</span>, </span>
<span id="cb672-6"><a href="lecon_carto.html#cb672-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">title =</span> <span class="st">&quot;Élévation&quot;</span>, </span>
<span id="cb672-7"><a href="lecon_carto.html#cb672-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">palette =</span> <span class="fu">pal.elevation</span>(<span class="dv">10</span>), </span>
<span id="cb672-8"><a href="lecon_carto.html#cb672-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">legend.hist =</span> <span class="cn">TRUE</span>, </span>
<span id="cb672-9"><a href="lecon_carto.html#cb672-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">colorNA =</span> <span class="st">&quot;beige&quot;</span> ) <span class="sc">+</span></span>
<span id="cb672-10"><a href="lecon_carto.html#cb672-10" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>, <span class="at">hist.width =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-241-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Il existe différentes façons de former des classes de valeur à partir de la distribution. L’argument <code>style</code> de la fonction <code>tm_raster()</code> permet de choisir une méthode parmi plusieurs dont les suivantes:</p>
<ul>
<li><code>"fixed"</code>: crée des classes de valeurs selon notre propre choix. Ces classes doivent être définies dans un vecteur assigné à l’argument <code>breaks</code>.</li>
<li><code>"equal"</code>: divise les valeurs en <code>n</code> classes. Ceci est la méthode par défaut.</li>
<li><code>"pretty"</code>: choisi automatiquement le nombre de classes qui permet de distinguer les valeurs dans un rendu esthétique.</li>
<li><code>"quantile"</code>: divise les valeurs en quantiles.</li>
<li><code>"jenks"</code>: utilise l’algorithme de Jenks pour déterminer le nombre optimal de classes.</li>
</ul>
<p>Visualisons à nouveau la carte des données d’élévation en utilisant un style “fixed” et un style “quantile”:</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="lecon_carto.html#cb673-1" aria-hidden="true" tabindex="-1"></a><span class="co"># définir la mise en page pour les deux cartes</span></span>
<span id="cb673-2"><a href="lecon_carto.html#cb673-2" aria-hidden="true" tabindex="-1"></a>format_carte <span class="ot">&lt;-</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb673-3"><a href="lecon_carto.html#cb673-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.67</span>,<span class="fl">0.04</span>), </span>
<span id="cb673-4"><a href="lecon_carto.html#cb673-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.title.size =</span> <span class="fl">0.8</span>, </span>
<span id="cb673-5"><a href="lecon_carto.html#cb673-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.format=</span><span class="fu">c</span>(<span class="at">text.align=</span><span class="st">&quot;right&quot;</span>),</span>
<span id="cb673-6"><a href="lecon_carto.html#cb673-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.bg.color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb673-7"><a href="lecon_carto.html#cb673-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.frame =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb673-8"><a href="lecon_carto.html#cb673-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb673-9"><a href="lecon_carto.html#cb673-9" aria-hidden="true" tabindex="-1"></a><span class="co"># style fixed.</span></span>
<span id="cb673-10"><a href="lecon_carto.html#cb673-10" aria-hidden="true" tabindex="-1"></a>Efixed <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(E) <span class="sc">+</span> </span>
<span id="cb673-11"><a href="lecon_carto.html#cb673-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_raster</span>(<span class="at">title =</span> <span class="st">&quot;Élévation(m)&quot;</span>,</span>
<span id="cb673-12"><a href="lecon_carto.html#cb673-12" aria-hidden="true" tabindex="-1"></a>                      <span class="at">palette =</span> <span class="fu">pal.elevation</span>(<span class="dv">10</span>),  </span>
<span id="cb673-13"><a href="lecon_carto.html#cb673-13" aria-hidden="true" tabindex="-1"></a>                      <span class="at">style =</span> <span class="st">&quot;fixed&quot;</span>, </span>
<span id="cb673-14"><a href="lecon_carto.html#cb673-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">200</span>,<span class="dv">300</span>,<span class="dv">400</span>,<span class="dv">500</span>,<span class="dv">600</span>,<span class="dv">700</span>,<span class="dv">800</span>,<span class="dv">900</span>,<span class="dv">1000</span>,<span class="dv">1600</span>)) <span class="sc">+</span></span>
<span id="cb673-15"><a href="lecon_carto.html#cb673-15" aria-hidden="true" tabindex="-1"></a>            format_carte</span>
<span id="cb673-16"><a href="lecon_carto.html#cb673-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb673-17"><a href="lecon_carto.html#cb673-17" aria-hidden="true" tabindex="-1"></a><span class="co"># style quantile</span></span>
<span id="cb673-18"><a href="lecon_carto.html#cb673-18" aria-hidden="true" tabindex="-1"></a>Equant <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(E) <span class="sc">+</span></span>
<span id="cb673-19"><a href="lecon_carto.html#cb673-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_raster</span>(<span class="at">title =</span> <span class="st">&quot;Élévation(m)&quot;</span>, </span>
<span id="cb673-20"><a href="lecon_carto.html#cb673-20" aria-hidden="true" tabindex="-1"></a>                      <span class="at">palette=</span><span class="fu">pal.elevation</span>(<span class="dv">10</span>),  </span>
<span id="cb673-21"><a href="lecon_carto.html#cb673-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">style=</span><span class="st">&quot;quantile&quot;</span>) <span class="sc">+</span></span>
<span id="cb673-22"><a href="lecon_carto.html#cb673-22" aria-hidden="true" tabindex="-1"></a>            format_carte</span>
<span id="cb673-23"><a href="lecon_carto.html#cb673-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb673-24"><a href="lecon_carto.html#cb673-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb673-25"><a href="lecon_carto.html#cb673-25" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Efixed,Equant)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-242-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
</div>
</div>
<div id="carte-avec-symboles-proportionnels" class="section level3 hasAnchor" number="6.1.11">
<h3><span class="header-section-number">6.1.11</span> Carte avec symboles proportionnels<a href="lecon_carto.html#carte-avec-symboles-proportionnels" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Dans des cartes thématiques, il est souvent utile de représentées certains attributs par des symboles proportionnels. Les fonctions <code>tm_symbols()</code> et <code>tm_bubbles()</code> de la bibliothèque <code>tmap</code> sont utiles pour réaliser ce type de cartes.</p>
<div id="fonction-tm_symbols" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_symbols()<a href="lecon_carto.html#fonction-tm_symbols" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_symbols()</code> est similaire à la fonction <code>tm_dots()</code> mais ne s’utilise pas nécessairement avec des données vectorielles de type points. En particulier, elle permet de représenter la valeur d’attribut d’un polygone en affichant un symbole dont la taille ou la couleur est proportionnelle à cette valeur.</p>
<p>En guise d’exemple, reprenons les données sur les régions administratives du Québec pour lesquelles nous connaissons la taille de la population. Nous pouvons illustrer les régions par un cercle dont le diamètre est proportionnel à la taille de sa population. Il s’agit d’attribuer à l’argument <code>size</code>, le nom de l’attribut que nous souhaitons représenter.</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="lecon_carto.html#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb674-2"><a href="lecon_carto.html#cb674-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>, <span class="at">legend.show =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb674-3"><a href="lecon_carto.html#cb674-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_style</span>(<span class="st">&quot;bw&quot;</span>) <span class="sc">+</span></span>
<span id="cb674-4"><a href="lecon_carto.html#cb674-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb674-5"><a href="lecon_carto.html#cb674-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="st">&quot;Pop_tot&quot;</span>, </span>
<span id="cb674-6"><a href="lecon_carto.html#cb674-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">legend.size.show =</span> <span class="cn">TRUE</span>, </span>
<span id="cb674-7"><a href="lecon_carto.html#cb674-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">legend.size.is.portrait =</span> <span class="cn">TRUE</span>, </span>
<span id="cb674-8"><a href="lecon_carto.html#cb674-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">title.size =</span> <span class="st">&quot;Population&quot;</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-243-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Par défaut, le symbole utilisé est un point. Le point correspond au symbole <code>shape = 21</code>. Nous pouvons toutefois utiliser d’autres symboles comme le carré (<code>shape = 15</code>), ou le repère géographique (<code>shape = marker_icon()</code>). Vous pouvez même importer vos propres symboles.</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="lecon_carto.html#cb675-1" aria-hidden="true" tabindex="-1"></a>carte_base <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb675-2"><a href="lecon_carto.html#cb675-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NUM_REG&quot;</span>, <span class="at">legend.show =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb675-3"><a href="lecon_carto.html#cb675-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">tm_style</span>(<span class="st">&quot;bw&quot;</span>) </span>
<span id="cb675-4"><a href="lecon_carto.html#cb675-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-5"><a href="lecon_carto.html#cb675-5" aria-hidden="true" tabindex="-1"></a>carte_carre <span class="ot">&lt;-</span> carte_base <span class="sc">+</span> </span>
<span id="cb675-6"><a href="lecon_carto.html#cb675-6" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">tm_symbols</span>(<span class="at">shape =</span> <span class="dv">15</span>,</span>
<span id="cb675-7"><a href="lecon_carto.html#cb675-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb675-8"><a href="lecon_carto.html#cb675-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">size =</span> <span class="st">&quot;Pop_tot&quot;</span>, </span>
<span id="cb675-9"><a href="lecon_carto.html#cb675-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">legend.size.show =</span> <span class="cn">TRUE</span>, </span>
<span id="cb675-10"><a href="lecon_carto.html#cb675-10" aria-hidden="true" tabindex="-1"></a>                            <span class="at">legend.size.is.portrait =</span> <span class="cn">TRUE</span>, </span>
<span id="cb675-11"><a href="lecon_carto.html#cb675-11" aria-hidden="true" tabindex="-1"></a>                            <span class="at">title.size =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb675-12"><a href="lecon_carto.html#cb675-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-13"><a href="lecon_carto.html#cb675-13" aria-hidden="true" tabindex="-1"></a>carte_marqueur <span class="ot">&lt;-</span> carte_base <span class="sc">+</span> </span>
<span id="cb675-14"><a href="lecon_carto.html#cb675-14" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">tm_symbols</span>(<span class="at">shape =</span> <span class="fu">marker_icon</span>(),</span>
<span id="cb675-15"><a href="lecon_carto.html#cb675-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">border.col =</span> <span class="cn">NULL</span>, </span>
<span id="cb675-16"><a href="lecon_carto.html#cb675-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">size =</span> <span class="st">&quot;Pop_tot&quot;</span>, </span>
<span id="cb675-17"><a href="lecon_carto.html#cb675-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">legend.size.show =</span> <span class="cn">TRUE</span>, </span>
<span id="cb675-18"><a href="lecon_carto.html#cb675-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">legend.size.is.portrait =</span> <span class="cn">TRUE</span>, </span>
<span id="cb675-19"><a href="lecon_carto.html#cb675-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">title.size =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb675-20"><a href="lecon_carto.html#cb675-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-21"><a href="lecon_carto.html#cb675-21" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(carte_carre, carte_marqueur)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-244-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="représenter-deux-légendes" class="section level5 unnumbered hasAnchor">
<h5>Représenter deux légendes<a href="lecon_carto.html#représenter-deux-légendes" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Lorsque nous utilisons des symboles proportionnels, nous devons souvent avoir plus d’une légende. Par exemple, dans les cartes précédentes, nous avions seulement une légende se rapportant à la taille des populations mais aucune légende pour identifier les régions. Pour ajouter deux légendes (ou plus), nous devons utiliser la fonction <code>tm_layout()</code> avec l’argument <code>legend.stack</code> qui précise si les légendes seront disposées de façon verticale ou horizontale.</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="lecon_carto.html#cb676-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb676-2"><a href="lecon_carto.html#cb676-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NOM_REG&quot;</span>,  </span>
<span id="cb676-3"><a href="lecon_carto.html#cb676-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>, </span>
<span id="cb676-4"><a href="lecon_carto.html#cb676-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">border.col =</span> <span class="st">&quot;darkgrey&quot;</span>, </span>
<span id="cb676-5"><a href="lecon_carto.html#cb676-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">title =</span><span class="st">&quot;Régions administratives&quot;</span>) <span class="sc">+</span> </span>
<span id="cb676-6"><a href="lecon_carto.html#cb676-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="st">&quot;Pop_tot&quot;</span>, </span>
<span id="cb676-7"><a href="lecon_carto.html#cb676-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">border.col =</span> <span class="st">&quot;grey&quot;</span>, </span>
<span id="cb676-8"><a href="lecon_carto.html#cb676-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">col=</span><span class="st">&quot;black&quot;</span>, </span>
<span id="cb676-9"><a href="lecon_carto.html#cb676-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">scale =</span> <span class="dv">2</span>, </span>
<span id="cb676-10"><a href="lecon_carto.html#cb676-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.size.show =</span> <span class="cn">TRUE</span>, </span>
<span id="cb676-11"><a href="lecon_carto.html#cb676-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.size.is.portrait =</span> <span class="cn">FALSE</span>, </span>
<span id="cb676-12"><a href="lecon_carto.html#cb676-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">sizes.legend.labels =</span> <span class="fu">c</span>(<span class="st">&quot;500&quot;</span>,<span class="st">&quot;1000&quot;</span>,<span class="st">&quot;1500&quot;</span>,<span class="st">&quot;2000&quot;</span>,<span class="st">&quot;2500&quot;</span>), </span>
<span id="cb676-13"><a href="lecon_carto.html#cb676-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">title.size =</span><span class="st">&quot;Population (en milliers)&quot;</span>) <span class="sc">+</span></span>
<span id="cb676-14"><a href="lecon_carto.html#cb676-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb676-15"><a href="lecon_carto.html#cb676-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb676-16"><a href="lecon_carto.html#cb676-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.stack =</span> <span class="st">&quot;vertical&quot;</span>, </span>
<span id="cb676-17"><a href="lecon_carto.html#cb676-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.title.fontface =</span> <span class="st">&quot;bold&quot;</span> ) </span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-245-1.png" width="720" style="display: block; margin: auto;" /></p>
<p><br></p>
<div id="fonction-tm_bubbles" class="section level6 unnumbered hasAnchor">
<h6>Fonction tm_bubbles()<a href="lecon_carto.html#fonction-tm_bubbles" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>La fonction <code>tm_bubbles()</code> est similaire à la fonction <code>tm_symbols()</code> et s’utilise lorsqu’on souhaite seulement représenter des symboles sous forme de cercle/point. Cette fonction est pratique lorsque nous voulons représenter deux attributs avec un symbole: le premier attribut est représenté par la taille du cercle et le second attribut par sa couleur.</p>
<p>Utilisons à nouveau les données sur la taille des populations des régions administratives. Par exemple, représentons chaque région par un cercle dont le diamètre est proportionnel à la taille totale de sa population (comme nous l’avons fait plus haut). De plus, colorons chaque cercle en fonction de la proportion d’enfants (individus agés entre 0 et 14 ans) dans sa population.</p>
<p>Tout d’abord, nous devons calculer la proportion d’enfants dans chaque région. Pour le moment, nous connaissons seulement le nombre d’enfants (<code>A0.14_T</code>). Créons un nouvel attribut pour le <em>shapefile</em> Q:</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="lecon_carto.html#cb677-1" aria-hidden="true" tabindex="-1"></a>Q<span class="sc">$</span>Pop_prop_enfant <span class="ot">&lt;-</span> Q<span class="sc">$</span>Pop_0_14<span class="sc">/</span>Q<span class="sc">$</span>Pop_tot</span></code></pre></div>
<p><br></p>
<p>Utilisons maintenant la fonction <code>tm_bubbles()</code> en définissant l’argument <code>size</code> par l’attribut <code>"ATot_T"</code>, et l’argument <code>col</code> par l’attribut <code>"Pop_prop_enfant"</code>:</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="lecon_carto.html#cb678-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span></span>
<span id="cb678-2"><a href="lecon_carto.html#cb678-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;NUM_REG&quot;</span>, </span>
<span id="cb678-3"><a href="lecon_carto.html#cb678-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.show =</span> <span class="cn">FALSE</span>, </span>
<span id="cb678-4"><a href="lecon_carto.html#cb678-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">palette =</span> <span class="st">&quot;Greys&quot;</span>) <span class="sc">+</span> </span>
<span id="cb678-5"><a href="lecon_carto.html#cb678-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_bubbles</span>(<span class="at">size =</span> <span class="st">&quot;Pop_tot&quot;</span> , </span>
<span id="cb678-6"><a href="lecon_carto.html#cb678-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&quot;Pop_prop_enfant&quot;</span>, </span>
<span id="cb678-7"><a href="lecon_carto.html#cb678-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">style =</span> <span class="st">&quot;quantile&quot;</span>, </span>
<span id="cb678-8"><a href="lecon_carto.html#cb678-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">scale =</span> <span class="dv">2</span>,  </span>
<span id="cb678-9"><a href="lecon_carto.html#cb678-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb678-10"><a href="lecon_carto.html#cb678-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">border.lwd =</span> .<span class="dv">5</span>,</span>
<span id="cb678-11"><a href="lecon_carto.html#cb678-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.size.show =</span> <span class="cn">TRUE</span>, </span>
<span id="cb678-12"><a href="lecon_carto.html#cb678-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.size.is.portrait =</span> <span class="cn">FALSE</span>, </span>
<span id="cb678-13"><a href="lecon_carto.html#cb678-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">title.size =</span><span class="st">&quot;Population (en milliers)&quot;</span>, </span>
<span id="cb678-14"><a href="lecon_carto.html#cb678-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">title.col =</span> <span class="st">&quot;Proportion d&#39;enfants (0-14 ans)&quot;</span>, </span>
<span id="cb678-15"><a href="lecon_carto.html#cb678-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">sizes.legend.labels =</span> <span class="fu">c</span>(<span class="st">&quot;500&quot;</span>,<span class="st">&quot;1000&quot;</span>,<span class="st">&quot;1500&quot;</span>,<span class="st">&quot;2000&quot;</span>,<span class="st">&quot;2500&quot;</span>))<span class="sc">+</span></span>
<span id="cb678-16"><a href="lecon_carto.html#cb678-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb678-17"><a href="lecon_carto.html#cb678-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb678-18"><a href="lecon_carto.html#cb678-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.title.size =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-247-1.png" width="720" style="display: block; margin: auto;" />
<br>
L’argument <code>style</code> est utilisé pour définir les classes de couleurs. Ici, nous avons choisi une classification en quantile. Noter que nous pouvons définir un titre pour la légende des tailles (<code>title.size</code>) et un titre pour la légende des couleurs (<code>title.col</code>).</p>
<p>Remarquer que cette figure nous permet d’observer que la proportion d’enfants au Nunavik est très grande malgré que la taille de la population soit petite.</p>
</div>
</div>
</div>
<div id="cartes-choroplèthes" class="section level3 hasAnchor" number="6.1.12">
<h3><span class="header-section-number">6.1.12</span> Cartes Choroplèthes<a href="lecon_carto.html#cartes-choroplèthes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Les cartes choroplèthes sont utilisées pour représenter des données vectorielles de type polygone en assignant une couleur à chaque polygone en fonction de la valeur d’un de ces attributs.</p>
<p>Pour créer des cartes choroplèthes, nous utilisons l’argument <code>col</code> de la fonction <code>tm_polygons()</code>. L’assignation des couleurs se fait de la même façon que pour <code>tm_raster()</code> et <code>tm_bubbles()</code> en définissant des classes de valeur d’attribut.</p>
<p>Créons des cartes choroplèthes de la proportion d’enfants dans les régions administratives en utilisant différentes classifications de couleurs.</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="lecon_carto.html#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Par defaut, nous avons 4 classes</span></span>
<span id="cb679-2"><a href="lecon_carto.html#cb679-2" aria-hidden="true" tabindex="-1"></a>Qdefaut <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;Pop_prop_enfant&quot;</span>)</span>
<span id="cb679-3"><a href="lecon_carto.html#cb679-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-4"><a href="lecon_carto.html#cb679-4" aria-hidden="true" tabindex="-1"></a><span class="co"># style fixed.</span></span>
<span id="cb679-5"><a href="lecon_carto.html#cb679-5" aria-hidden="true" tabindex="-1"></a>Qfixed <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;Pop_prop_enfant&quot;</span>, </span>
<span id="cb679-6"><a href="lecon_carto.html#cb679-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">style =</span> <span class="st">&quot;fixed&quot;</span>, </span>
<span id="cb679-7"><a href="lecon_carto.html#cb679-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.14</span>, <span class="fl">0.15</span>, <span class="fl">0.16</span>, <span class="fl">0.18</span>, <span class="fl">0.3</span>))</span>
<span id="cb679-8"><a href="lecon_carto.html#cb679-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-9"><a href="lecon_carto.html#cb679-9" aria-hidden="true" tabindex="-1"></a><span class="co"># style quantile </span></span>
<span id="cb679-10"><a href="lecon_carto.html#cb679-10" aria-hidden="true" tabindex="-1"></a>Qquant <span class="ot">=</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;Pop_prop_enfant&quot;</span>, </span>
<span id="cb679-11"><a href="lecon_carto.html#cb679-11" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">style =</span> <span class="st">&quot;quantile&quot;</span>)</span>
<span id="cb679-12"><a href="lecon_carto.html#cb679-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-13"><a href="lecon_carto.html#cb679-13" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(Qdefaut,Qfixed,Qquant)</span></code></pre></div>
<pre><code>Legend labels were too wide. The labels have been resized to 0.6, 0.6, 0.6, 0.6, 0.6. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger.</code></pre>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-248-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<!--  
#### Données COVID {-}

Lire les données: cas cumulés de COVID en date du 18 janvier 2021 par région socio-sanitaire.



```r
Q_covid <-st_read("Module6/Module6_donnees/COVID/QC_Covid_210118.shp")
```

```{.codeout}
Reading layer `QC_Covid_210118' from data source 
  `E:\ELF\Dropbox\Teluq\Enseignement\Cours\SCI1031\Developpement\Structure_test\sci1031\Module6\Module6_donnees\COVID\QC_Covid_210118.shp' 
  using driver `ESRI Shapefile'
Simple feature collection with 16 features and 3 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -830300 ymin: 118000 xmax: 783300 ymax: 2091000
Projected CRS: NAD83 / Quebec Lambert
```




Comme pour la proportion d'enfants, on veut la densité de cas: la proportion de cas par rapport à la population totale d'une région socio-sanitaire

```r
Q_covid$prop_cas<-(Q_covid$Cs_cmls)/(Q_covid$ATot_T)
```


Comparaison nombre vs proportion

```r
Q_nombre<-tm_shape(Q_covid)+tm_polygons(col="Cs_cmls", title = "Nombre de cas")

Q_prop<-tm_shape(Q_covid)+tm_polygons(col="prop_cas", title = "Proportion de cas")

tmap_arrange(Q_nombre,Q_prop)
```

<img src="Cours_SpatialR_files/figure-html/unnamed-chunk-251-1.png" width="720" style="display: block; margin: auto;" />


Expliquer le sens de chaque style.
Voir: https://bookdown.org/nicohahn/making_maps_with_r5/docs/tmap.html#static-maps-with-tmap

```r
format_carte <-tm_layout(legend.text.size = 0.55)

Q_quantile<-tm_shape(Q_covid)+tm_polygons(col="prop_cas", style = "quantile", title = "Quantile")+format_carte
Q_jenks<-tm_shape(Q_covid)+tm_polygons(col="prop_cas", style = "jenks", title = "Jenks")+format_carte
Q_pretty<-tm_shape(Q_covid) + tm_polygons(col="prop_cas", style = "pretty", title = "Pretty")+format_carte

tmap_arrange(Q_quantile,Q_jenks,Q_pretty)
```

<img src="Cours_SpatialR_files/figure-html/unnamed-chunk-252-1.png" width="720" style="display: block; margin: auto;" />

C'est souvent en regardant la distribution des données qu'on peut déterminer la meilleure classification pour représenter nos données
EXEMPLE DE MELANIE ou alors faire ça au début.

Représenter chaque region individuellement

```r
tm_shape(Q_covid)+tm_polygons(col="prop_cas", style = "quantile", legend.is.portrait = FALSE)+
  tm_facets(by="NOM_REG", nrow =4,  scale.factor = 5)+
  tm_layout(panel.label.height=2, panel.label.size = 0.9, legend.show = FALSE)
```

<img src="Cours_SpatialR_files/figure-html/unnamed-chunk-253-1.png" width="720" style="display: block; margin: auto;" />

 -->
</div>
<div id="cartes-à-panneaux-multiples" class="section level3 hasAnchor" number="6.1.13">
<h3><span class="header-section-number">6.1.13</span> Cartes à panneaux multiples<a href="lecon_carto.html#cartes-à-panneaux-multiples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="fonction-tm_facets" class="section level6 unnumbered hasAnchor">
<h6>Fonction <code>tm_facets()</code><a href="lecon_carto.html#fonction-tm_facets" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Il est parfois utile illustrer des polygones côte-à-côte afin de faciliter la comparaison d’un de leurs attributs. On appelle les cartes des polygones individuellement représentés des <em>panneaux</em>.</p>
<p>Pour créer une carte à panneaux multiples, nous utilisons d’abord la fonction <code>tm_polygons()</code> pour représenter chaque polygone selon la méthode de notre choix (par exemple selon une représentation choroplèthe d’un des attributs). Ensuite, nous ajoutons la fonction <code>tm_facets()</code> pour préciser la disposition des panneaux (arguments <code>nrow</code> ou <code>ncol</code>) ainsi que l’attribut utilisé (la <em>facette</em>) pour distinguer chaque panneau (argument <code>by</code>).</p>
<p>Représentons à nouveau les polygones des régions administratives selon la proportion d’enfants dans leur population mais cette fois en créant une carte à panneaux multiples:</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="lecon_carto.html#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Q) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;Pop_prop_enfant&quot;</span>,  </span>
<span id="cb681-2"><a href="lecon_carto.html#cb681-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">style =</span> <span class="st">&quot;quantile&quot;</span>) <span class="sc">+</span></span>
<span id="cb681-3"><a href="lecon_carto.html#cb681-3" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">tm_facets</span>(<span class="at">by =</span> <span class="st">&quot;NOM_REG&quot;</span>, </span>
<span id="cb681-4"><a href="lecon_carto.html#cb681-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">nrow =</span> <span class="dv">5</span>,  </span>
<span id="cb681-5"><a href="lecon_carto.html#cb681-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">scale.factor =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb681-6"><a href="lecon_carto.html#cb681-6" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">tm_layout</span>(<span class="at">panel.label.height =</span> <span class="dv">2</span>, </span>
<span id="cb681-7"><a href="lecon_carto.html#cb681-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">panel.label.size =</span> <span class="fl">0.9</span>, </span>
<span id="cb681-8"><a href="lecon_carto.html#cb681-8" aria-hidden="true" tabindex="-1"></a>                           <span class="at">legend.show =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-254-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>L’argument <code>scale.factor</code> détermine la mise à l’échelle du texte par rapport à la mise à l’échelle des polygones. Les polygones ont été réduits de taille pour entrer dans leur panneau, toutefois nous souhaitons que le titre apparaissant dans la partie supérieure du panneau ne soit pas réduit autant.</p>
<p>Il est possible de modifier la police du texte, sa couleur, la couleur de fond des panneaux, le cadre des panneaux, et plus, en utilisant les arguments de la fonction <code>tm_layout()</code>.</p>
</div>
</div>
<div id="cartes-avec-encadré" class="section level3 hasAnchor" number="6.1.14">
<h3><span class="header-section-number">6.1.14</span> Cartes avec encadré<a href="lecon_carto.html#cartes-avec-encadré" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Il est parfois nécessaire d’accompagner une carte par une autre carte de taille moindre circonscrite dans un encadré sur ou en marge de la carte principale. Ceci est le cas, par exemple, lorsque nous souhaitons préciser la localisation de la carte principale dans une région plus grande.</p>
<div id="bibliothèque-grid" class="section level6 unnumbered hasAnchor">
<h6>Bibliothèque <code>grid</code><a href="lecon_carto.html#bibliothèque-grid" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Pour réaliser une carte avec un encadré, nous devons utiliser la bibliothèque <code>grid</code>. Commençons par installer cette bibliothèque:</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="lecon_carto.html#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;grid&quot;</span>)</span></code></pre></div>
<p><br></p>
<p>En guise d’exemple, considérons une section du <em>raster</em> d’élévation <code>E</code> correspondant à la région de l’Outaouais. Vous n’avez pas besoin de comprendre les opérations ci-dessous car nous les apprendrons dans les modules 7 et 8.</p>
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb683-1"><a href="lecon_carto.html#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Isoler le polygone de l&#39;Outaouais</span></span>
<span id="cb683-2"><a href="lecon_carto.html#cb683-2" aria-hidden="true" tabindex="-1"></a>Q_Outaouais <span class="ot">&lt;-</span> <span class="fu">subset</span>(Q, NOM_REG <span class="sc">==</span> <span class="st">&quot;Outaouais&quot;</span>)</span>
<span id="cb683-3"><a href="lecon_carto.html#cb683-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb683-4"><a href="lecon_carto.html#cb683-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Découper le raster E selon l&#39;étendue de Q_Outaouais</span></span>
<span id="cb683-5"><a href="lecon_carto.html#cb683-5" aria-hidden="true" tabindex="-1"></a>E_Outaouais <span class="ot">&lt;-</span> <span class="fu">crop</span>(E, <span class="fu">extent</span>(Q_Outaouais))</span>
<span id="cb683-6"><a href="lecon_carto.html#cb683-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb683-7"><a href="lecon_carto.html#cb683-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer un mask </span></span>
<span id="cb683-8"><a href="lecon_carto.html#cb683-8" aria-hidden="true" tabindex="-1"></a>E_Outaouais <span class="ot">&lt;-</span> <span class="fu">mask</span>(E_Outaouais, Q_Outaouais)</span></code></pre></div>
<p><br></p>
<p>Créons d’abord une carte des données d’élévation pour la région de l’Outaouais. Cette carte consituera notre carte principale.</p>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="lecon_carto.html#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Définir la carte principale</span></span>
<span id="cb684-2"><a href="lecon_carto.html#cb684-2" aria-hidden="true" tabindex="-1"></a>carte_princ <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(E_Outaouais) <span class="sc">+</span> </span>
<span id="cb684-3"><a href="lecon_carto.html#cb684-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_raster</span>(<span class="at">title =</span> <span class="st">&quot;Élévation (m)&quot;</span>, </span>
<span id="cb684-4"><a href="lecon_carto.html#cb684-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">palette =</span> <span class="fu">pal.elevation</span>(<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb684-5"><a href="lecon_carto.html#cb684-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>,<span class="st">&quot;bottom&quot;</span>), </span>
<span id="cb684-6"><a href="lecon_carto.html#cb684-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">text.size =</span> <span class="fl">0.6</span>) </span>
<span id="cb684-7"><a href="lecon_carto.html#cb684-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-8"><a href="lecon_carto.html#cb684-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Mise en page de la carte                </span></span>
<span id="cb684-9"><a href="lecon_carto.html#cb684-9" aria-hidden="true" tabindex="-1"></a>format_carte <span class="ot">&lt;-</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb684-10"><a href="lecon_carto.html#cb684-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.outside =</span> <span class="cn">TRUE</span>,</span>
<span id="cb684-11"><a href="lecon_carto.html#cb684-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.outside.position =</span> <span class="st">&quot;right&quot;</span>,</span>
<span id="cb684-12"><a href="lecon_carto.html#cb684-12" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.title.size =</span> <span class="fl">0.8</span>, </span>
<span id="cb684-13"><a href="lecon_carto.html#cb684-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.bg.color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb684-14"><a href="lecon_carto.html#cb684-14" aria-hidden="true" tabindex="-1"></a>                          <span class="at">legend.frame =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><br></p>
<p>Créons maintenant une carte du Québec qui délimite la région de l’Outaouais par des frontières de couleur rouge. Cette carte sera l’encadré à insérer sur la carte principale.</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb685-1"><a href="lecon_carto.html#cb685-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Définir la carte encadré</span></span>
<span id="cb685-2"><a href="lecon_carto.html#cb685-2" aria-hidden="true" tabindex="-1"></a>carte_cadre <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Q) <span class="sc">+</span> </span>
<span id="cb685-3"><a href="lecon_carto.html#cb685-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">tm_borders</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> </span>
<span id="cb685-4"><a href="lecon_carto.html#cb685-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">tm_shape</span>(Q_Outaouais) <span class="sc">+</span> </span>
<span id="cb685-5"><a href="lecon_carto.html#cb685-5" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">tm_borders</span>(<span class="at">lw=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><br></p>
<p>Nous pouvons enfin combiner les deux cartes ensembles. Il s’agit d’afficher la carte principale et d’ajouter la carte encadré en utilisant la fonction <code>print()</code>.</p>
<p>En particulier, nous utilisons la fonction <code>viewport()</code> de la bibliothèque <code>grid</code> qui permet de définir la position de la carte encadré sur la carte ainsi que sa taille.</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="lecon_carto.html#cb686-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb686-2"><a href="lecon_carto.html#cb686-2" aria-hidden="true" tabindex="-1"></a>carte_princ <span class="sc">+</span> format_carte</span>
<span id="cb686-3"><a href="lecon_carto.html#cb686-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(carte_cadre, <span class="at">vp =</span> <span class="fu">viewport</span>(<span class="fl">0.72</span>, <span class="fl">0.42</span>, <span class="at">width =</span> <span class="fl">0.4</span>, <span class="at">height =</span> <span class="fl">0.4</span>))</span></code></pre></div>
<p><img src="Cours_SpatialR_files/figure-html/unnamed-chunk-259-1.png" width="720" style="display: block; margin: auto;" />
<br></p>
<p>Les chiffres (0.72,0.42) correspondent aux coordonnées (x,y) de la position de la carte encadrée sur la carte principale (où (0,0) est le coin inférieur gauche de la carte principale, et (1,1) est le coin supérieur droit).</p>
<p>Les arguments <code>width</code> et <code>height</code> sont des nombres entre 0 et 1. Ceux-ci correspondent au facteur par lequel nous souhaitons réduire la largeur et la hauteur de la carte encadrée.</p>
<!--   ### Cartes interactives avec tmap -->
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="38">
<li id="fn38"><p>Consulter ce <a href="https://r-spatial.org/r/2018/10/25/ggplot2-sf.html">site</a> pour en apprendre davantage sur la cartographie avec <code>ggplot2</code><a href="lecon_carto.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p>Noter que le nombre de divisions créé par <code>tmap</code> est approximativement celui demandé car <code>tmap</code> crée des divisions uniformément espacées situées sur des coordonnées de valeurs entières.<a href="lecon_carto.html#fnref39" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="carto.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercices.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Cours_SpatialR.pdf", "pdf"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true,
"edit": "https://github.com/sci1031/sci1031/edit/master/%s"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
