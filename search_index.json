[["SRC.html", "Module 3 Systèmes de coordonnées de référence", " Module 3 Systèmes de coordonnées de référence Ce module porte sur les systèmes de coordonnées de référence (SRC). Nous avons vu dans le module 2 que lintégration de couches de données spatiales différentes nécessite quelles soient définies selon le même système de référence spatiale. Cest-à-dire que le modèle mathématique utilisé pour représenter la position des données sur la surface de la Terre doit être le même pour les deux jeux de données. Dans ce module, nous définissons plusieurs concepts cartographiques pour bien comprendre limportance du SRC dans la visualisation, la manipulation et lanalyse de données spatiales. À la fin de ce module vous saurez: Expliquer la différence entre un ellipsoïde local et un ellipsoïde global. Définir ce quest un datum et nommer des datums courants. Expliquer la différence entre le système de coordonnées géographique et le système de coordonnées projeté. Définir les propriétés permettant de catégoriser les projections Nommer des projections courantes. La section exercices est divisée en deux parties. Dans un premier temps, vous réaliserez une auto-évaluation pour vérifier votre acquisition des connaissances enseignées dans ce module. Dans un second temps, vous continuerez votre apprentissage de R Markdown. "],["leçon-1.html", "3.1 Leçon", " 3.1 Leçon Un système de coordonnées de référence (SCR) est un ensemble dinformations qui accompagne un jeu de données spatiales et qui permet de situer ces données sur la surface de la Terre. Ces informations comprennent le modèle utilisé pour représenter la forme de la Terre, cest-à-dire sa géodésie, et le système de mesure utilisé pour définir des coordonnées qui est soit géographique (système à trois dimensions où les coordonnées sont mesurées à partir du centre de la Terre) ou planimétrique (système à deux dimensions où les coordonnées terrestres sont projetées sur une carte plane) (Esri 2016). 3.1.1 Les systèmes géodésiques La géodésie est létude de la forme et des dimensions de la Terre. Au cours de lhistoire, les penseurs et les scientifiques ont adopté divers modèles pour représenter la forme de la Terre (Figure 3.1). Nous référons couramment à la Terre comme un objet rond et nous la représentons comme telle (le globe terrestre!). En vérité, la Terre nest pas sphérique mais légèrement aplatie aux pôles. FIGURE 3.1: Évolution des modèles de la forme de la Terre : un corps plat, une sphère, une ellipsoïde et un géoïde. La Terre est un corps plastique qui est façonné par un ensemble de forces internes et externes lui donnant une forme irrégulière qui évolue continuellement dans le temps (Figure 3.2). En particulier, le champ gravitationnel agit différemment sur les parties solides, semi-rigides et liquides de la Terre car celles-ci ont des densités différentes1. FIGURE 3.2: Les différentes forces internes et externes agissant continuellement sur la Terre. Source : Ressources naturelles Canada. Le géoïde est un modèle de la Terre qui tient compte de leffet du champ gravitationnel. Cest une surface équipotentielle2 du champ de gravité de la Terre qui coïncide avec le niveau moyen des océans (Figure 3.3). FIGURE 3.3: Le géoïde. a) La forme irrégulière du géoïde avec des bosses et de creux créer par le champ gravitationnel agissant de façon inégale sur la Terre (source : Bezdek et Sebera 2013). b) Le géoïde coïncide avec le niveau moyen des océans et se distingue de lellipsoïde (figure adaptée de USGS). La précision avec laquelle nous pouvons lier un endroit sur Terre à un ensemble de coordonnées dépend du modèle du globe choisi. Le géoïde procure une plus grande précision que lellipsoïde, mais lellipsoïde peut être décrit plus facilement par des équations mathématiques. Nous pouvons distinguer deux types dellipsoïdes utilisés en cartographie. Les ellipsoïdes globaux représentent la Terre à léchelle du globe (Figure 3.4). Les ellipsoïdes locaux représentent une petite région du globe (Figure 3.4). La précision dun ellipsoïde local est meilleure que celle dun ellipsoïde global mais uniquement pour des coordonnées situées dans la région quil représente. FIGURE 3.4: Ellipsoïdes global et local. Un ellipsoïde global épouse mieux la forme globale du géoïde, tandis quun ellipsoïde local épouse mieux la forme du géoïde localement dans la région indiquée par la flèche noire. Figure adaptée de Knippers (2009). Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre . Puisque aucun ellipsoïde népouse parfaitement la surface de la Terre, il y a toujours une certaine marge derreur à lutilisation dun datum géocentrique (Figure 3.4). La communauté internationale a adopté différent modèles dellipsoïdes globaux au fil du temps avec lamélioration des techniques spatiales de télémétrie et de positionnement (Thériault 2010). Ces ellipsoïdes diffèrent par les paramètres mathématiques utilisés pour les définir. Les principaux systèmes de référence globaux utilisés présentement à travers de monde sont le Geodetic Reference System 1980 (GRS80), adopté par lUnion Géodésique et Géophysique Internationale et le World Geodetic System 1984 (WGS84), défini par le National Geospatial-Intelligence Agency des États-Unis (Figure 3.5). Le Global Positioning System (le GPS) utilise le WGS 84. FIGURE 3.5: Datums globaux. Lorigine de lellipsoïde WGS84 se trouve au centre de masse de la Terre. Lorigine de lellipsoïde GRS80 se trouve à environ 2 m de lorigine de lellipsoïde WGS84. Lellipsoïde Clarke 1866 se trouve à environ 236 m de celle du WGS84. Le datum local NAD27 qui a précédé le NAD83 (voir plus bas) était basé sur lellipsoïde Clarke 1866. Figure adaptée du National Oceanic and Atmospheric Administration, source : https://vdatum.noaa.gov/docs/datums.html Le Cadre international de référence terrestre (ITRF) est un système de référence créé et maintenu par le Service international de la rotation de la Terre et des Systèmes de référence (IERS), un organisme international « qui étudie lorientation de la Terre et établit un système de coordonnées sur la Terre et par rapport à lespace. »3 LITRF nest pas basé sur un modèle dellipsoïde. Il est constitué dun ensemble de repères terrestres dont les coordonnées \\((x,y,z)\\) à la surface de la Terre sont établies à partir du centre de la Terre (Figure 3.6). On se sert de ces repères pour déterminer les paramètres des ellipsoïdes globaux et locaux. À cause du mouvement des plaques tectoniques, les coordonnées des repères de lITRF doivent être réévaluées périodiquement. FIGURE 3.6: Réseau de repères terrestres en vue détablir le prochain ITRF. Source : NASA Earth Observatory Les datums locaux sont associés à des ellipsoïdes locaux. Ce sont des systèmes de référence dont lorigine de lellipsoïde est décalée par rapport au centre de la Terre. Un datum local fait correspondre un point de la surface de lellipsoïde local à un point de la surface de la Terre. Ce point de référence est fixe et il sert « dancrage » au datum. Cest le point dorigine du système de référence local, et il est souvent basé sur une plaque tectonique. Il existe des centaines de datum local servant de système de référence à différentes régions du globe. Il est possible dutiliser le même ellipsoïde pour définir différents datums. Le système de référence utilisé en Amérique du Nord est le North American Datum of 1983 (NAD83). Il est basé sur lellipsoïde GRS80 et est fixé à la plaque tectonique nord-américaine. Le European Terrestrial Reference System of 1989 (ETRS89) est le système de référence utilisé en Europe. Il est aussi basé sur lellipsoïde GRS80 mais est fixé à la plaque tectonique eurasienne. On peut utiliser un datum local seulement pour la région pour laquelle il a été conçu. Ainsi, il serait erroné dutiliser le ETRS89 pour définir la localisation dun phénomène spatial au Québec. FIGURE 3.7: Réseau de repères terrestres. Gauche : un repère du Réseau de base canadien (RBC) situé en Saskatchewan. Droite : un repère du Réseau géodésique de grande précision (RGP) au Québec. Certains repères du RGP font partie du RBC. (source : www.waymarking.com) Le Système canadien de référence spatiale (SCRS) est un datum local créé par le gouvernement canadien spécifiquement pour ces besoins. La majorité des agences fédérales canadiennes qui ont recours à des données spatiales (Ressources naturelles Canada, Pêches et Océan Canada, Agence spatiale canadienne, etc.) utilise ce système de référence. Le SCRS est un quadrillage tridimensionnel (latitude, longitude et élévation) adapté du système NAD83  il est dailleurs appelé le NAD83 (SCRS). Il a été développé dans les années 1990 pour corriger des distorsions denviron 2 m observées entre le NAD 83 et un réseau de points de contrôle (le Réseau de base canadien, RBC, Figure 3.7 suivi par un système global de navigation par satellite (GNSS) (pour en savoir plus consulter cette description du SCRS donnée par Ressources naturelles Canada) (Figure 3.8). FIGURE 3.8: Comparaison entre le NAD83 et le SCRS. Les points rouges sont la localisation de repères selon le SCRS et les lignes bleues représentent les erreurs (décalages) produites par le NAD83 sur ces localisations. Figure tirée de Craymer (2006). 3.1.2 Les systèmes de coordonnées La localisation géographique se fait à partir dun système de coordonnées. Multiples systèmes de coordonnées peuvent être définis, et les coordonnées dun endroit sur Terre différeront selon le système utilisé. Il existe deux types de système de coordonnées : le système de coordonnées géographiques et le système de coordonnées projetées. Le système de coordonnées géographique représente la Terre comme une sphère et donne des coordonnées en trois dimensions pour se situer sur sa surface. Le système géographique est défini par le datum choisi (qui peut être local ou global), une unité angulaire de mesure et un méridien principal (Esri 2016) (Figure 3.9). FIGURE 3.9: Le système de coordonnées géographique. Les points à la surface de la Terre sont définis par les coordonnées sphériques (\\(\\phi\\),\\(\\lambda\\)) associées à la longitude (ligne mauve) et à la latitude (ligne bleue foncée) respectivement. Le point rouge possède les coordonnées (\\(\\phi\\),\\(\\lambda\\)) = (50\\(^{\\circ}\\) E, 40\\(^{\\circ}\\) N). La ligne jaune représente le méridien principal. Source : Esri, image récupérée à https://desktop.arcgis.com/fr/arcmap/10.3/guide-books/map-projections/geographic-coordinate-system.htm Les coordonnées sphériques (\\(\\phi\\), \\(\\lambda\\)) dun point sur la surface de la Terre correspondent à sa longitude et à sa latitude respectivement (Figure 3.9). On exprime ces coordonnées en degrés (degrés, minutes, secondes (DMS) ou degré décimal (D,D)). Le système géographique forme ce que lon appelle un graticule sur la surface de la Terre (Figure 3.10). Cest une grille composée de lignes horizontales, appelées les parallèles, et de lignes verticales, appelées les méridiens. Le parallèle de latitude zéro constitue léquateur, alors que le méridien de longitude zéro constitue le méridien principal. Dans la plupart des systèmes de coordonnées géographiques, le méridien qui traverse lObservatoire royal de Greenwich en Angleterre correspond au méridien principal. FIGURE 3.10: Graticule. Les parallèles et les méridiens forment un graticule. Source : Esri, image récupérée à https://desktop.arcgis.com/fr/arcmap/10.3/guide-books/map-projections/about-geographic-coordinate-systems.htm Le système de coordonnées projeté, quant à lui, réfère à une transformation mathématique permettant de représenter sous forme de carte plane la réalité tridimensionnelle de la Terre (Figure 3.11). FIGURE 3.11: Le système de coordonnées projeté. Il permet de représenter sur une surface plane bidimensionnelle la surface tridimensionnelle de la carte à laide dune transformation mathématique \\((x,y) = f(\\phi, \\lambda)\\) Les systèmes de coordonnées projetés sont nécessaires pour la création de cartes géographiques. Cependant, puisquil est impossible de représenter parfaitement la surface dun objet tridimensionnel sur une carte plane, les systèmes projetés génèrent certaines distorsions (ou déformations) : forme, distance, direction, etc. Par ailleurs, toutes les projections conservent un élément important de la cartographie : la précision de la localisation géographique. 3.1.3 Les projections On peut catégoriser les systèmes de coordonnées projetés selon la classe de transformations mathématiques utilisées, le type dintersections entre le globe et le plan, lorientation du plan, et le type de distorsions créé sur le plan. Classes de transformations On distingue trois classes principales de transformation pour créer un système de coordonnées projeté (Figure 3.12). Cylindrique : la surface de la Terre est projetée sur un plan enroulé comme un cylindre. Généralement le cylindre coïncide avec le globe le long dun parallèle (p.ex. léquateur). Conique : la surface de la Terre est projetée sur un cône. Le cône et le globe coïncident le long dun ou de deux parallèles. Pour aplanir le cône, il est découpé le long dun méridien, généralement le méridien opposé au méridien principal. Azimutale (ou plane) : la surface de la Terre est projetée directement sur un plan. Celui-ci touche généralement le globe à un seul point (p.ex. le pôle Nord). FIGURE 3.12: Classes de projection: cylindrique (gauche), conique (centre) et azimutale (droite). Toutes les projections illustrées utilisent un plan de projection qui est tangent à la surface de la Terre. Source : Esri. Image adaptée dillustrations récupérées à https://desktop.arcgis.com/en/arcmap/10.3/guide-books/map-projections/projection-types.htm Types dinsersection Il existe deux types dintersection entre un plan et la surface du globe (Figure 3.13). Tangente : le plan touche la surface du globe à un seul point (azimutal) ou le long dune seule ligne (cylindrique et conique). Les transformations illustrées à la Figure classes sont toutes tangentes. Sécante : le plan traverse la surface du globe le long dune seule ligne (azimutal) ou le long de deux lignes (cylindrique et conique). Ces lignes sont appelées les parallèles standards. Les transformations illustrées à la Figure intersection sont toutes sécantes. Notez quil ny a pas de distorsion au point ou à la ligne dintersection car à cet endroit les systèmes de coordonnées géographiques et projetés coïncident parfaitement. FIGURE 3.13: Plans de projection sécants avec le globe. Illustrations pour les classes de projection cylindrique (gauche), conique (centre) et azimutale (droit). Source : Esri. Image adaptée dillustrations récupérées à https://desktop.arcgis.com/en/arcmap/10.3/guide-books/map-projections/projection-types.htm Orientation Le plan de projection peut être positionné selon trois différentes orientations par rapport au globe. Normale : le plan est parallèle par rapport à laxe Nord-Sud du globe. Les transformations illustrées aux Figure classes et intersection sont toutes normales. Transverse : le plan est perpendiculaire à laxe Nord-Sud du globe (Figure 3.14 gauche). Oblique : le plan est ni parallèle ni perpendiculaire à laxe Nord-Sud du globe (Figure 3.14 droite). FIGURE 3.14: Orientations du plan de projection. Orientation transversale (gauche), aussi appelée équatoriale pour la projection azimutale, et orientation oblique (droit). Source : Esri. Image adaptée dillustrations récupérées à https://desktop.arcgis.com/en/arcmap/10.3/guide-books/map-projections/projection-types.htm Distorsion Les projections produisent toutes une certaine forme de distorsion. On caractérise un système de coordonnées projeté selon la propriété quil conserve, c-à-d la propriété quil ne déforme pas. Il y a trois propriétés importantes qui sont ou non conservées (en tenant compte de léchelle de la carte): la forme, la superficie et la distance. Conforme : la projection conserve localement les angles entre les droites. Les cartes de navigation, notamment, sont produites par des projections conformes pour mesurer adéquatement la direction de trajectoires. La conformité implique également la conservation de la forme des régions de petite superficie. Équivalente : la projection conserve localement laire des régions. Les atlas géographiques emplois souvent des cartes produites par des projections équivalentes pour éviter les biais dans la représentation des superficies de différentes régions du monde. Équidistante : la projection conserve les distances sur certaines lignes du globe, généralement les méridiens. Aucune projection ne peut être à la fois conforme et équivalente. Plusieurs projections offrent des compromis entre ces deux propriétés. Il existe plus de deux cent projections distinctes créées au cours de lHistoire par les scientifiques, notamment des astronomes, des géographes, et des navigateurs. La figure 3.15 illustre un petit sous-ensemble de projections. La projection cylindrique équidistante (coin supérieur gauche de la figure 3.15 a été créée par Marinus de Tyr, un astronome dorigine phénicienne, vers lan 100. Plusieurs projections sont identifiées par le nom de la personne qui en a fait la découverte. Par exemple, Gérard Mercator est un mathématicien et géographe flamand du 16e siècle, et Jean-Henri Lambert est un mathématicien, cartographe et astronome dorigine alsacienne du 18e siècle. FIGURE 3.15: Sélection de 12 projections. Lensemble des cartes est tiré du site : https://map-projections.net/ Je vous invite à consulter le site très intéressant de Tobias Jung où un grand nombre de projections est répertorié. Vous pouvez connaître les propriétés des projections et aussi comparer deux projections entre elles. Jetez-y un coup dil! Sur ce site vous pourrez apprendre, par exemple, que les projections de Mollweide, de Bonne, Equal Earth et eumorphique de Boggs sont équivalentes, alors que les projections de Mercator et de Lagrange sont conformes. Les projections de Mercator et cylindrique équidistante, comme son nom lindique, sont équidistantes. Lindicatrice de Tissot permet dillustrer les déformations produites par une projection (Figure 3.16). Cette indicatrice porte le nom du cartographe français, Nicolas Auguste Tissot, qui la créé au 19e siècle. Le niveau de changement de la taille et de la forme des cercles rouges permet de repérer les endroits sur la carte de plus fortes déformations. FIGURE 3.16: Indicatrice de Tissot pour les 12 projections de la figure 3.15. Lensemble des cartes est tiré du site : https://map-projections.net/ 3.1.4 Projections couramment utilisées Projection de Mercator La projection de Mercator (Figure Mercator, Figure projections et Figure tissot coin supérieur droit) est une projection cylindrique conforme. Les méridiens y sont parallèles et équidistants. Les parallèles (les lignes de latitude) sont aussi parallèles. Cependant, elles sécartent les unes des autres au fur et à mesure quelles séloignent de léquateur (Esri 2016). La projection de Mercator fût originalement conçue pour la navigation puisquelle préserve les angles. Elle préserve aussi les formes ce qui la rend très populaire pour la cartographie aux échelles régionales. Par ailleurs, la projection de Mercator ne préserve pas les superficies. Elle génère de grandes distorsions aux pôles (Figure 3.16 coin supérieur droit). Par exemple, la superficie du Groenland apparait être aussi grande que celle de lAfrique sur une projection de Mercator (Figure 3.17, gauche). En vérité, la superficie du Groenland (2 166 086 km\\(^{2}\\), en mauve sur la Figure Mercator, droit) est inférieure à celle de lAlgérie (2 381 741 km\\(^{2}\\), en orange sur la Figure 3.17, droit). Ces distorsions rendent la projection de Mercator peu adéquate pour produire des cartes à léchelle mondiale. FIGURE 3.17: Projection de Mercator. À gauche, on observe que les méridiens sont équidistants tandis que les parallèles sécartent en se dirigeant vers les pôles (source : Tobias Jung, https://map-projections.net/). À droite, on observe que la superficie réelle du Groenland (en mauve) est similaire à celle de lAlgérie (source : https://thetruesize.com/ Les services de cartographie en ligne, comme Google Maps, OpenStreetMap, Bing Maps ou Mapquest, utilise la projection Web de Mercator (avec le datum WGS84). Cette projection est légèrement différente de la projection usuelle de Mercator (elle utilise la transformation sphérique plutôt que ellipsoïdal) produisant des cartes qui ne sont pas tout à fait conformes (PROJ contributors 2020). Projection Transverse universelle de Mercator La projection Transverse universelle de Mercator (en anglais Universal Transverse Mercator, UTM) est une projection cylindrique transverse sécante (Figure 3.18. Le globe est séparé en 60 zones au nord et au sud de léquateur. Chaque zone couvre 6\\(^{\\circ}\\) et est défini en son centre par un méridien central. Les zones sont numérotées de 1 à 60 en suivant la convention selon laquelle la zone 1 couvre la région allant de 180\\(^{\\circ}\\) à 174\\(^{\\circ}\\) ouest (0\\(^{\\circ}\\) correspondant au méridien de Greenwich). Les zones ne couvrent pas les pôles, elles sarrêtent à la latitude de 84\\(^{\\circ}\\) au nord et de 80\\(^{\\circ}\\) au sud. FIGURE 3.18: Projection transverse universelle de Mercator. Gauche : le globe est découpé en tranches de 6\\(^{\\circ}\\), 3\\(^{\\circ}\\) de part et dautre dun méridien central (source : https://www.swisstopo.admin.ch/). Droite : La surface entière de la Terre est représentée par 60 zones (source : https://www.icsm.gov.au/). La projection transverse de Mercator est réalisée sur chacune des zones de façon distincte. Nous obtenons donc 60 projections différentes. Chaque zone présente des distorsions, mais puisque les zones sont petites (6\\(^{\\circ}\\)), les distorsions sont limitées. Les coordonnées dun point dans ce système projeté sont données dabord par le numéro de la zone dans laquelle il se situe, puis par sa position au sein de la zone, cest-à-dire par sa longitude et sa latitude mesurées en mètre. On utilise souvent les appellations anglaises pour désigner les longitudes, eastings, et les latitudes, northings. Par convention, on associe au méridien central la longitude de 500000 m (500 km). Si le point se situe à louest du méridien central, sa longitude est déterminée en soustrayant la valeur 500000 m de la distance à laquelle il se trouve du méridien. À lopposé, si le point se trouve à lest du méridien central, sa longitude sera déterminée en ajoutant 500000 m à la distance qui le sépare du méridien. Les latitudes sont déterminées à partir de léquateur. Dans lhémisphère nord, léquateur correspond à lorigine (0 m) et la latitude dun point est déterminée par la distance qui le sépare de léquateur. Dans lhémisphère sud, léquateur correspond à la valeur 10 000 000 m, et la latitude dun point est déterminée en soustrayant à 10 000 000 m la distance qui le sépare de léquateur (Figure 3.19). Ces conventions sont utilisées de manière à avoir toujours des coordonnées positives dans la zone couverte par la projection. FIGURE 3.19: Longitudes et latitudes à lintérieur dune zone de la projection UTM. Source : http://geokov.com/ Le Canada sétend de la zone 7 à la zone 22, alors que le Québec couvre les zones 17 à 21 (Figure 3.20). Notez que les zones sont aussi appelées des fuseaux. FIGURE 3.20: Projection Universelle Transverse de Mercator au Québec. Source: Lapointe (2005) Pour réduire les problèmes liés aux déformations associées au système UTM, le Québec sest doté de son propre système : la projection modifiée transverse de Mercator (MTM). Le système MTM est identique au système UTM à la différence que chaque zone couvre une longitude de 3\\(^{\\circ}\\). Les zones étant plus petites, les distorsions sont réduites. Les zones sont numérotées de 1 à 8 débutant aux Iles-de-la-Madeleine et se terminant en Abitibi (Figure 3.21). On associe au méridien central des zones MTM la longitude de 304800 m. FIGURE 3.21: Projection Mercator Transverse Modifiée au Québec. Source: Lapointe (2005) Projection conique conforme de Lambert La projection conique conforme de Lambert (LCC) conserve, comme son nom lindique, la forme des régions ainsi que les angles. Cette projection est également sécante : il ny a de distorsion le long des deux parallèles standards (Figure 3.22). La projection LCC est particulièrement utile pour représenter les régions de latitudes moyennes, comme lAmérique du Nord, mais elle est également utilisée en Europe. FIGURE 3.22: Projection conique conforme de Lambert. Source : United States Geological Survey, récupérée sur Wikipedia La position des parallèles standards varie selon la région du globe représentée. Au Canada, elles sont généralement situées à 49 N et 77 N. La carte ci-dessous du Canada (Figure 3.23) utilise une projection LCC pour présenter les résultats des élections fédérales 2019. FIGURE 3.23: Un exemple de projection conique de Lambert. La carte des résultats des élections fédérales canadiennes de 2019. Source : Élections Canada. 3.1.5 Représentation dun SCR Les données spatiales doivent toujours être accompagnées de linformation permettant de connaître le système de coordonnées de référence qui leur est associé. Ces métadonnées peuvent être représenter (ou encoder) de différentes façons. Le Well-known text Le format Well-known text (WKT) est une syntaxe standard utilisée pour représenter les données vectorielles et aussi les SCR des données vectorielles et matricielles. Ce format consiste en une série détiquette de la forme [...] associée à différentes informations relatives au SCR. Par exemple: ## Reading layer `pistes_cyclables_type&#39; from data source ## `E:\\ELF\\Dropbox\\Teluq\\Enseignement\\Cours\\SCI1031\\Developpement\\Structure_test\\sci1031\\Module4\\Module4_donnees\\Montreal_Velo\\pistes\\pistes_cyclables_type.shp&#39; ## using driver `ESRI Shapefile&#39; ## Simple feature collection with 6395 features and 1 field ## Geometry type: MULTILINESTRING ## Dimension: XY ## Bounding box: xmin: 267983.7 ymin: 5029291 xmax: 306349.2 ymax: 5062582 ## Projected CRS: Transverse_Mercator ## Coordinate Reference System: ## User input: Transverse_Mercator ## wkt: ## PROJCRS[&quot;Transverse_Mercator&quot;, ## BASEGEOGCRS[&quot;NAD83&quot;, ## DATUM[&quot;North American Datum 1983&quot;, ## ELLIPSOID[&quot;GRS 1980&quot;,6378137,298.257222101, ## LENGTHUNIT[&quot;metre&quot;,1]], ## ID[&quot;EPSG&quot;,6269]], ## PRIMEM[&quot;Greenwich&quot;,0, ## ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433]]], ## CONVERSION[&quot;unnamed&quot;, ## METHOD[&quot;Transverse Mercator&quot;, ## ID[&quot;EPSG&quot;,9807]], ## PARAMETER[&quot;Latitude of natural origin&quot;,0, ## ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433], ## ID[&quot;EPSG&quot;,8801]], ## PARAMETER[&quot;Longitude of natural origin&quot;,-73.5, ## ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433], ## ID[&quot;EPSG&quot;,8802]], ## PARAMETER[&quot;Scale factor at natural origin&quot;,0.9999, ## SCALEUNIT[&quot;unity&quot;,1], ## ID[&quot;EPSG&quot;,8805]], ## PARAMETER[&quot;False easting&quot;,304800, ## LENGTHUNIT[&quot;metre&quot;,1], ## ID[&quot;EPSG&quot;,8806]], ## PARAMETER[&quot;False northing&quot;,0, ## LENGTHUNIT[&quot;metre&quot;,1], ## ID[&quot;EPSG&quot;,8807]]], ## CS[Cartesian,2], ## AXIS[&quot;(E)&quot;,east, ## ORDER[1], ## LENGTHUNIT[&quot;metre&quot;,1, ## ID[&quot;EPSG&quot;,9001]]], ## AXIS[&quot;(N)&quot;,north, ## ORDER[2], ## LENGTHUNIT[&quot;metre&quot;,1, ## ID[&quot;EPSG&quot;,9001]]]] La syntaxe PROJ4 La syntaxe PROJ4 consiste en une liste de paramètres précédés par le symbole +. Elle donne une représentation du CRS de façon beaucoup plus concise. Voici un exemple: ## [1] &quot;+proj=tmerc +lat_0=0 +lon_0=-73.5 +k=0.9999 +x_0=304800 +y_0=0 +datum=NAD83 +units=m +no_defs&quot; Les paramètres principaux ont la signification suivante: +proj : le nom de la projection +datum : le nom du datum +ellps : le nom de lellipsoïde +zone : le numéro de la zone pour une projection UTM +lat_0 : la latitude de lorigine +lat_1 : la latitude du premier parallèle standard4 +lat_2 : la latitude du deuxième parallèle standard +lon_0 : la longitude du méridien central +x_0 : le faux est (false easting; dans le cas de projection transverse comme UTM) +y_0 : le faux nord (false northing) +units : les unités (mètres, degrés, etc.) +k_0: facteur déchelle Vous pouvez trouver dautres paramètres ici. Les codes EPSG Le Comité de topographie et de positionnement (Surveying and Positionning Comittee) de lAssociation internationale des producteurs de pétrole et de gaz (OGP), autrefois le European Petroleum Survey Group (EPSG), est une organisation scientifique liée à lindustrie pétrolière qui a mis en place une base de données répertoriant tous les systèmes de référence et les systèmes de coordonnées géographiques et projetés existants. Cette base de données, appelée le registre de codes EPSG, associe un code numérique à chaque système pour en faciliter lidentification et précise ses paramètres géodésiques et de projection. Vous pouvez consulter cette base de données ici. Vous pouvez aussi utiliser le site https://epsg.io/ et entrez Quebec dans la fenêtre de recherche pour connaître les codes EPGS utilisés au Québec. Par exemple : NAD83 : 4269 NAD83 (SCRS): 4617 WGS84: 4326 Ou encore: Le fuseau 2 de la projection MTM basé sur le NAD83 : 32182 La projection Web de Mercator : 3857. 3.1.6 Résumé La figure ci-dessous (Figure 3.24) résume les étapes du processus utilisé pour définir un système de coordonnées géographique et un système de coordonnées projeté. FIGURE 3.24: Résumé. Les étapes du processus pour définir un système de coordonnées géographique et un système de coordonnées projeté. Source : la figure utilise des pictogrammes créés par T. Grajecta (Noun Project) Lorsquon représente des données spatiales par un système de coordonnées géographique, il faut toujours préciser le datum qui a été adopté. Lorsquon représente des données spatiales par un système de coordonnées projeté, il faut toujours préciser le datum et la projection. Lorsquon combine des couches de données différentes, on doit sassurer quelles sappuient sur le même datum et la même projection. Si ce nest pas le cas, on peut transformer le système de référence et le système de projection. Nous verrons comment procéder à ces transformations dans le module 7 et e module 8. Source: Le Québec géographique Une surface où le potentiel est constant et qui est en tous points perpendiculaire à la direction dans laquelle sexerce la pesanteur. Une surface équipotentielle est de niveau, c.-à-d. que leau y reste au repos. Définition de Ressources Naturelles Canada Définition selon Wikipédia Souvenez-vous que pour une projection cylindrique ou conique, le plan intersecte le globe le long dun ou de deux parallèles. Voir la leçon 2 "],["ex_markdown2.html", "3.2 Exercices", " 3.2 Exercices Dans cette section nous poursuivons lintroduction à R Markdown entamée dans la section Exercices du module 2. Rappelons les objectifs de cette introduction. Décrire en quoi consiste R Markdown; Décrire les liens entre R, Markdown et Pandoc; Utiliser la syntaxe Pandoc Markdown de base; Créer des documents dynamiques avec la bibliothèque rmarkdown. Cette introduction à RMarkdown a été rédigée par Kevin Cazelles, collobateur clé à réalisation de ce cours. Kevin est un chercheur en écologie computationnelle et fervent utilisateur des outils pour la science ouverte. Allez voir ses travaux sur son site https://kevcaz.insileco.io/ et son profil GitHub https://github.com/KevCaz. 3.2.1 Le variante Pandoc de Markdown Dans cette partie, nous détaillons les éléments de formatage du texte proposés par la syntaxe Pandoc de Markdown5 Informations de départ De façon générale, nous écrivons du texte dans un fichier R Markdown de la même façon que nous le ferions dans un document Word. Nous pouvons, par exemple, écrire des accents français sans problème. Les paragraphes Pour créer des paragraphes, il faut ajouter une ligne (ou plus) vide entre les paragraphes. Ainsi, avec les lignes suivantes : Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre. nous obtenons : Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre. Notez quavec un simple retour à la ligne, aucun saut de ligne nest inséré. Les paragraphes sont alors affichés bout à bout. Par exemple, ce texte: Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre. saffiche comme ceci: Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre. Il est cependant possible dajouter un retour à la ligne en utilisant un retour à la ligne et tabulation à la fin du premier paragraphe. Par exemple, ce texte: Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre. saffiche comme ceci: Un datum est un système de référence qui détermine la position dun ellipsoïde sur la Terre : cest-à-dire son origine par rapport au centre du globe, ainsi que son orientation. Les datums géocentriques sont associés à des ellipsoïdes globaux. Ce sont des systèmes de référence terrestres globaux dont lorigine correspond au centre de masse de la Terre. La seule différence entre cet exemple et lexemple précédent est lajout dune tabulation après orientation.. Les symboles réservés Certains symboles sont réservés au formatage du texte. Lorsque leur affichage est requis, cest-à-dire lorsque nous désirons les utiliser dans notre texte, nous devons les faire précéder du caractère déchappement qui est, pour Markdown, lantislash : \\. Par exemple, nous devons entrer  : \\\\ \\&amp; \\# \\$ \\[ Pour obtenir : \\ &amp; # $ [ Les commentaires Pour rédiger des commentaires dans le texte qui ne seront pas affichés dans le document final, nous utilisons &lt;!-- devant le commentaire et --&gt; après celui-ci. Décoration du texte Pour écrire du texte en italique, vous avez deux possibilités : *le texte à mettre en italique* _le texte à mettre en italique_ Pour écrire du texte en gras, vous avez aussi deux possibilités : **le texte à mettre en gras** __le texte à mettre en gras__ Pour écrire du texte en gras et italique, utilisez : **le _texte en italique et en gras_** Pour obtenir un texte rayé, entrez : ~~texte rayé~~ Pour écrire un élément en exposant, utilisez : ^texte en exposant^ Pour écrire un élément en indice, tapez : ~texte en indice~ Notez quil ny a pas de balises pour le soulignement du texte. De manière générale, quand un élément de mise en page manque dans la syntaxe, il est toujours possible dutiliser des commandes dun langage. Par exemple, pour souligner dans un document qui sera produit en HTML, je peux utiliser &lt;u&gt;texte souligné&lt;/u&gt; mais cela ne me permettra pas davoir un texte souligné en Word ou en PDF. De même que si jutilise \\underline{texte souligné} le texte sera souligné en PDF, mais pas en HTML ni en Word. Procéder de la sorte nest pas toujours souhaité car le document R Markdown perd en généralité, en ce sens où il ne pourra pas être correctement généré dans tous les formats. Cela nest cependant pas nécessairement un problème, par exemple, si vous souhaiteZ obtenir le document en un seul format, ce fonctionnement devient un atout puisque vous pouvez utiliser toute la gamme de mise en forme offert par le langage en question. Les titres La façon la plus simple de désigner les titres dans un texte se fait par lutilisation du symbole # (ATX heading). Un seul # désigne un titre de premier niveau, et nous utilisons un nombre croissant de # pour descendre dans larborescence des titres: # Un titre d&#39;ordre 1 ## Un titre d&#39;ordre 2 ### Un titre d&#39;ordre 3 Il est aussi possible dutiliser une série de = en dessous des titres de premier niveau et une ligne de - en dessous des titres de niveau 2. Cette option a la qualité de permettre de repérer facilement les titres dans le code source. Un titre d&#39;ordre 1 ================== Un titre d&#39;ordre 2 ------------------ ### Un titre d&#39;ordre 3 Les listes Les listes sont très intuitives en Markdown, alors quelles requièrent des balises un peu lourdes aussi bien en Latex quen HTML. Dans les exemples donnés, il faut toujours séparer le texte principal de la liste par des sauts de ligne. Listes non numérotées Pour obtenir une liste non numérotée, nous pouvons utiliser le symbole *  : * objet 1, * objet 2, * objet 3. ou bien le symbole +  : + objet 1, + objet 2, + objet 3. ou encore le symbole -  : - objet 1, - objet 2, - objet 3. et même  : + objet 1, * objet 2, - objet 3. Dans tous les cas, la liste produite saffiche ainsi : objet 1, objet 2, objet 3. Listes espacées Pour produire une liste plus aérée, nous pouvons ajouter un espace entre les éléments de la liste. Lorsque le document produit est en HTML, ce formatage produit une balise paragraphe (cest-à-dire que &lt;p&gt; &lt;/p&gt; est ajouté). * objet 1, * objet 2, * objet 3. devient: objet 1, objet 2, objet 3. Listes hiérarchisées Pour créer des listes hiérarchisées, il sagit dutiliser une indentation de quatre espaces (ou une tabulation) entre chaque niveau. Par exemple, ceci: - objet 1, + machin 1 - chose 1 - chose 2 + machin 2 - objet 2, - objet 3. produit cette liste: objet 1, machin 1 chose 1 chose 2 machin 2 objet 2, objet 3. Listes avec du texte ou du code Pour alterner des éléments dune liste avec du texte ou du code, il faut utiliser des sauts de lignes avec lindentation adéquate. Ainsi, avec les lignes suivantes : - élément 1&amp;nbsp;: Un petit texte qui pourrait expliciter ce qu&#39;est l&#39;élément 1. - machin 2: for (i in 1:2) print(i) nous obtenons : élément 1 : Un petit texte qui pourrait expliciter ce quest lélément 1. machin 2: for (i in 1:2) print(i) Listes numérotées Pour créer une liste numérotée, il suffit de numéroter chaque élément de la liste. Par exemple: 1. machin 1, 2. machin 2, 3. machin 3. produit ceci: machin 1, machin 2, machin 3. Si les nombres ne sont pas écrits manière ordonnée, cela ne changera pas le résultat. Néanmoins, le premier nombre détermine le numéro de départ de la liste. En écrivant : 3. machin 1, 3. machin 2, 3. machin 3, 5. machin 4. nous obtenons: machin 1, machin 2, machin 3, machin 4. Pour ne pas se soucier des numéros, il existe un style par défaut : #. machin 1, #. machin 2, #. machin 3. Nous retrouvons bien la première liste numérotée : machin 1, machin 2, machin 3. Plusieurs styles de numérotation sont disponibles. Par exemple, en écrivant : #) élément 1 #) élément 2 #) élément 3 (1) truc 1 (2) truc 2 (5) truc 3 i. machin 1 i. machin 2 i. machin 3 nous obtenons : élément 1 élément 2 élément 3 truc 1 truc 2 truc 3 machin 1 machin 2 machin 3 Nous avons aussi la possibilité de mélanger les niveaux numérotés et les niveaux non-numérotés. Par exemple, cette liste 1. machin 1, 1. machin 1.1, 2. machin 1.2, 2. machin 2, - machin 2.1, - machin 2.2, - machin 3, 3. machin 4, 4. machin 5. donne ceci  : machin 1, machin 1.1, machin 1.2, machin 2, machin 2.1, machin 2.2, machin 3, machin 4, machin 5. Enfin, il possible de mettre manuellement fin à une liste en introduisant un commentaire entre les listes à séparer : (1) truc 1 (2) truc 2 (3) truc 2b &lt;!-- end --&gt; (1) truc 3 (2) truc 4 ces lignes sont rendues ainsi : truc 1 truc 2 truc 2b truc 3 truc 4 Blocs de citation Pour utiliser un bloc de citation (la balise blockquote en HTML), il suffit dutiliser &gt; avant la citation. Ainsi les lignes suivantes : &gt; la citation est ajoutée comme ceci, elle nous donne une indentation adéquate pour une mise en page agréable dont le style peut être facilement travailler en HTML grâce au CSS. deviennent : La citation est ajoutée comme ceci, elle nous donne une indentation adéquate pour une mise en page agréable dont le style peut être facilement travailler en HTML grâce au CSS. Pour créer une hiérarchie dans les citations, nous ajoutons des &gt;  : &gt; La citation de départ &gt; &gt;&gt; une hiérarchie dans la citation ce qui donne : La citation de départ une hiérarchie dans la citation 3.2.2 Intégration de R dans le document Lintérêt du package rmarkdown est détendre la syntaxe Pandoc Markdown avec les fonctionnalités du package knitr pour insérer non seulement du code R mais aussi les sorties associées (sorties console et figures). Nous obtenons ainsi un document dynamique en ce sens que si les données associées et/ou le code R changent, le document évolue aussi. Cela permet, entre autres, de créer des rapports automatisés. Il y existe deux manières dinsérer des sorties R dans le document: directement dans le texte (inline); en utilisant un bloc de code dédié. Pour inclure une sortie texte directement dans un paragraphe, nous utilisons  : `r expression`. Par exemple, il est possible dinsérer lheure et la date en utilisant la fonction R Sys.time(). Ainsi, lutilisation de `r Sys.time()`  dans le texte affichera la sortie de cette fonction R, soit 2022-07-08 16:29:17. Le reste de cette section se concentre sur les blocs de code R (appelés code chunks en anglais). Typiquement, lutilisation dun tel bloc de code ressemble à ceci : ```{r, idbloc, param1 = val1, param2 = val2} ligne de code 1 ligne de code 2 ... ligne de code n ``` idbloc est le nom de lidentifiant que vous pouvez donner au bloc de code. Ceci permet de citer les blocs ou leurs sorties à lintérieur du document. Lidentifiant nest pas obligatoire. En revanche, un identifiant donné ne peut être utilisé quune seule fois. param1 = val1 correspond à un paramètre permettant de préciser comment le code source sera affiché dans le document, ou comment la sortie du code sera affichée. Il existe un grand nombre de paramètres possibles. Ils permettent de mettre de lavant certaines parties du code, et aussi de choisir finement les sorties R (figures, tables, etc.) à ajouter aux documents. Lensemble des paramètres sont disponibles à lURL suivante https://yihui.org/knitr/options/). Les commentaires Les commentaires sont introduits, comme dans R, sous la forme de lignes de code commençant par un #. Débutons avec un exemple simple qui inclut un commentaire et une addition : ```{r, addition} # une addition avec R. 2+3 ``` Notez que le terme addition qui suit r dans laccolade est lidentifiant du morceau de code (la virgule entre les deux premiers éléments est facultative). Ce morceau de code saffiche ainsi: # une addition avec R. 2+3 ## [1] 5 Nous obtenons donc un code R dans un environnement adéquate (voir la coloration du code) avec la sortie console associée, en loccurrence, le résultat de laddition. Affichage du code source Le paramètre echo Prenons le bloc de code suivant. ```{r} # une addition de variables avec R a &lt;- 2 b &lt;- 3 a + b ``` Celui-ci saffiche comme: # une addition de variables avec R a &lt;- 2 b &lt;- 3 a + b ## [1] 5 Afin de ne pas afficher le code source dans un document (parce que nous souhaitement uniquement afficher la sortie produite par le code), il suffit dutiliser le paramètre echo = FALSE. Par défaut, nous avons que echo = TRUE. Ainsi, le bloc de code sanscode ```{r sanscode, echo = FALSE} # une addition de variables avec R a &lt;- 2 b &lt;- 3 a + b ``` nous donne uniquement la sortie, sans le code: ## [1] 5 Le paramètre echo peut aussi être utilisé pour choisir des lignes de code spécifique à montrer. Pour cela, nous utilisons un vecteur indiquant les positions des lignes à montrer. Par exemple, pour montrer uniquement les lignes 1 et 4, nous utilisons: ```{r code14, echo = c(1, 4)} # une addition de variables avec R a &lt;- 2 b &lt;- 3 a + b ``` ce qui donne: # une addition de variables avec R a + b ## [1] 5 Affichage des sorties Le paramètre results Le paramètre results permet de choisir comment les sorties dun bloc de code R sont traitées. Par défaut, cest le mode markup qui est utilisé: ```{r markup, results = &#39;markup&#39;} # une division avec R cat(&quot;Exemple de division avec R: 1/998.001 = &quot;, 1/998.001) ``` Ceci donne: # une division avec R cat(&quot;Exemple de division avec R: 1/998.001 = &quot;, 1/998.001) ## Exemple de division avec R: 1/998.001 = 0.001002003 Lorsque result = 'asis', les résultats sont affichés comme un paragraphe du document texte principal : ```{r asis, results = &#39;asis&#39;} # une division avec R cat(&quot;Exemple de division avec R: 1/998.001 = &quot;, 1/998.001) ``` # une division avec R cat(&quot;Exemple de division avec R: 1/998.001 = &quot;, 1/998.001) Exemple de division avec R: 1/998.001 = 0.001002003 Lorsque result = 'hide', les sorties console ne sont pas ajoutées : ```{r hide, results = &#39;hide&#39;} # une division avec R cat(&quot;Exemple de division avec R: 1/998.001 = &quot;, 1/998.001) ``` donne: # une division avec R cat(&quot;Exemple de division avec R: 1/998.001 = &quot;, 1/998.001) Finalement, results = 'hold' permet dafficher toutes les sorties après le morceau de code. Sans cette option, les sorties sont ajoutées au fur et à mesure de lexécution du code et donc le bloc est interrompu. Par exemple, avec le code suivant : ```{r} a &lt;- 2 print(a) b &lt;- 3 print(b) 2 + 3 ``` on obtient : a &lt;- 2 print(a) ## [1] 2 b &lt;- 3 print(b) ## [1] 3 2 + 3 ## [1] 5 alors quavec results='hold', ```{r hold, results = &#39;hold&#39;} a &lt;- 2 print(a) b &lt;- 3 print(b) 2 + 3 ``` on obtient plutôt : a &lt;- 2 print(a) b &lt;- 3 print(b) 2 + 3 ## [1] 2 ## [1] 3 ## [1] 5 Affichage des messages Il y a trois type de messages retournés par R: les messages : une simple indication (voir la fonction message()); les avertissements qui soulignent que quelque chose est peut-être problématiques, mais le code est exécutable (voir la fonction warning()); les erreurs qui indiquent que quelque chose ne fonctionne pas dans lexécution du code. Considérons le bloc suivant qui inclut un message, un avertissement, une erreur (en commentaire) et une addition. ```{r} message(&quot;Ceci est un message&quot;) warning(&quot;Ceci est un avertissement&quot;) # stop(&quot;Ceci est un problème&quot;) 2 + 3 ``` message(&quot;Ceci est un message&quot;) ## Ceci est un message warning(&quot;Ceci est un avertissement&quot;) ## Warning: Ceci est un avertissement # stop(&quot;Ceci est un problème&quot;) 2 + 3 ## [1] 5 Il est possible de supprimer le message en utilisant message = FALSE. En effet, le code suivant: ```{r sansmessage, message = FALSE} message(&quot;Ceci est un message&quot;) warning(&quot;Ceci est un avertissement&quot;) # stop(&quot;Ceci est un problème&quot;) 2 + 3 ``` naffiche pas le message de sortie: message(&quot;Ceci est un message&quot;) warning(&quot;Ceci est un avertissement&quot;) ## Warning: Ceci est un avertissement # stop(&quot;Ceci est un problème&quot;) 2 + 3 ## [1] 5 De la même manière il est possible de supprimer lavertissement avec warning = FALSE. ```{r sansavertissement, warning = FALSE} message(&quot;Ceci est un message&quot;) warning(&quot;Ceci est un avertissement&quot;) # stop(&quot;Ceci est un problème&quot;) 2 + 3 ``` Le code précédent naffiche pas lavertissement généré: message(&quot;Ceci est un message&quot;) ## Ceci est un message warning(&quot;Ceci est un avertissement&quot;) # stop(&quot;Ceci est un problème&quot;) 2 + 3 ## [1] 5 Notez que si vous utilisez results = 'hide' les avertissements et les messages seront tout de même retournés. ```{r sansavertissement2, warning = FALSE, message = FALSE, results = &#39;hide&#39;} message(&quot;Ceci est un message&quot;) warning(&quot;Ceci est un avertissement&quot;) # stop(&quot;Ceci est un problème&quot;) 2 + 3 ``` message(&quot;Ceci est un message&quot;) ## Ceci est un message warning(&quot;Ceci est un avertissement&quot;) # stop(&quot;Ceci est un problème&quot;) 2 + 3 Enfin, par défaut, si une erreur advient dans un code, le document ne sera pas généré (cest dailleurs la raison pour laquelle la ligne stop(\"Ceci est un problème\") est commentée précédemment). Il est cependant parfois souhaitable de montrer une erreur (à des fins pédagogiques, par exemple). Pour ce faire, il faut utiliser error = TRUE: ```{r erreur, error = TRUE} message(&quot;Ceci est un message&quot;) warning(&quot;Ceci est un avertissement&quot;) stop(&quot;Ceci est un problème&quot;) 2 + 3 ``` message(&quot;Ceci est un message&quot;) ## Ceci est un message warning(&quot;Ceci est un avertissement&quot;) ## Warning: Ceci est un avertissement stop(&quot;Ceci est un problème&quot;) ## Error in eval(expr, envir, enclos): Ceci est un problème 2 + 3 ## [1] 5 Modifier le mode devaluation du code Par défaut, avec rmarkdown, dans un bloc de code R, le code est exécuté par R et les sorties sont ajoutées dans le document. Ci-dessus, nous avons vu comment modifier ce qui est présenté dans le code source et changer certain aspect de la sortie. Il est également possible de modifier lexécution du code. Le paramètre eval Dans certains cas, il peut savérer utile de montrer le code source sans lexécuter. Pour empêcher lévaluation du code, on utilise eval = FALSE. Ainsi, avec {r eval, eval = FALSE} install.packages(`rmarkdown`) linstallation de la bibliothèque rmarkdown nest pas exécutée mais simplement affichée : install.packages(`rmarkdown`) Le paramètre include Un autre cas relativement commun est de vouloir exécuter un bloc de code de manière silencieuse. En dautres termes, nous ne souhaitons pas présenter le code ni sa sortie, mais nous souhaitons tout de même lexécuter. Dans un rapport dynamique, par exemple, nous sommes souvent amenés à exécuter un script ou charger des fonctions qui serviront éventuellement à créer des sorties qui seront intégrées dans le rapport. Nous ne souhaitons pas que les lectrices ou les lecteurs du rapport lisent ces éléments de code. Nous savons maintenant que lutiliation des options echo = FALSE, results = hide, message = FALSE et warning = FALSE ensemble dans laccolade, permet dobtenir cette exécution silencieuse. Il existe cependant une manière plus rapide darriver à ce résultat en utilisant le paramètre include = FALSE. En guise dexemple, créons une fonction qui fait une addition simple et assignons le résultat à la variable res ```{r include, include = FALSE} mon_addition &lt;- function(a, b) { return(a + b) } res &lt;- mon_addition(2, 3) ``` Lintégration de ce bloc de code dans le document R markdown naffichera ni le code ni sa sortie dans le document final. Toutefois, le code sera bel et bien exécuté. En effet, nous pouvons afficher la variable res qui a été calculée: print(res) ## [1] 5 Comme prévu, nous obtenons la valeur 5. Nous pouvons également utiliser la fonction mon_addition() : mon_addition(12, 30) ## [1] 42 3.2.2.1 Afficher des tableaux 3.2.2.2 Afficher des figures 3.2.2.3 Afficher des images &gt; 3.2.3 À vous de jouer ! À venir Vous pouvez également consulter le site de référence de Pandoc et le résumé à la première page du guide de référence R Markdown. Pour une source en français, le guide Élaboration et conversion de documents avec Markdown et Pandoc (http://enacit1.epfl.ch/markdown-pandoc/) écrit par Jean-Daniel Bonjour fournit un excellent tour dhorizon. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
